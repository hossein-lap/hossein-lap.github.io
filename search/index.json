
{
    
    
    
    
        
        
        
    
        
        
        
    
        
        
        
    
        
        
        
    
        
        
        
    
        
        
        
    
        
        
        
    
        
        
        
    
        
        
        
    
        
        
        
    
        
        
        
    
        
        
        
    
        
        
        
    
        
        
        
    
        
        
        
    
        
        
        
    
    "pages": [{"date":"2024-10-08","image":"","imageAlt":"","link":"https://hossein-lap.github.io/notes/makefile/","summary":"Makefile tips\n","tags":["Build System","Makefile"],"text":" this makefile serves two purposes. the first is to automate common admin tasks (like running tests, checking for vulnerabilities, pushing changes to a remote repository, and deploying to production), and the second is to provide short aliases for go commands that are long or difficult to remember.\nthe exact contents of the makefile changes from project to project. it’s generic enough that you should be able to use it as-is for almost all projects.\n1. gist # change these variables as necessary. main_package_path = ./cmd/example binary_name = example # =========================================================================== # # helpers # =========================================================================== # ## help: print this help message .phony: help help: @echo \u0026#39;usage:\u0026#39; @sed -n \u0026#39;s/^##//p\u0026#39; ${makefile_list} | column -t -s \u0026#39;:\u0026#39; | sed -e \u0026#39;s/^/ /\u0026#39; .phony: confirm confirm: @echo -n \u0026#39;are you sure? [y/n] \u0026#39; \u0026amp;\u0026amp; read ans \u0026amp;\u0026amp; [ $${ans:-n} = y ] .phony: no-dirty no-dirty: @test -z \u0026#34;$(shell git status --porcelain)\u0026#34; # =========================================================================== # # quality control # =========================================================================== # ## audit: run quality control checks .phony: audit audit: test go mod tidy -diff go mod verify test -z \u0026#34;$(shell gofmt -l .)\u0026#34; go vet ./... go run honnef.co/go/tools/cmd/staticcheck@latest -checks=all,-st1000,-u1000 ./... go run golang.org/x/vuln/cmd/govulncheck@latest ./... ## test: run all tests .phony: test test: go test -v -race -buildvcs ./... ## test/cover: run all tests and display coverage .phony: test/cover test/cover: go test -v -race -buildvcs -coverprofile=/tmp/coverage.out ./... go tool cover -html=/tmp/coverage.out # =========================================================================== # # development # =========================================================================== # ## tidy: tidy modfiles and format .go files .phony: tidy tidy: go mod tidy -v go fmt ./... ## build: build the application .phony: build build: # include additional build steps, like typescript, scss or tailwind compilation here... go build -o=/tmp/bin/${binary_name} ${main_package_path} ## run: run the application .phony: run run: build /tmp/bin/${binary_name} ## run/live: run the application with reloading on file changes .phony: run/live run/live: go run github.com/cosmtrek/air@v1.43.0 \\ --build.cmd \u0026#34;make build\u0026#34; --build.bin \u0026#34;/tmp/bin/${binary_name}\u0026#34; --build.delay \u0026#34;100\u0026#34; \\ --build.exclude_dir \u0026#34;\u0026#34; \\ --build.include_ext \u0026#34;go, tpl, tmpl, html, css, scss, js, ts, sql, jpeg, jpg, gif, png, bmp, svg, webp, ico\u0026#34; \\ --misc.clean_on_exit \u0026#34;true\u0026#34; # =========================================================================== # # operations # =========================================================================== # ## push: push changes to the remote git repository .phony: push push: confirm audit no-dirty git push ## production/deploy: deploy the application to production .phony: production/deploy production/deploy: confirm audit no-dirty goos=linux goarch=amd64 go build -ldflags=\u0026#39;-s\u0026#39; -o=/tmp/bin/linux_amd64/${binary_name} ${main_package_path} upx -5 /tmp/bin/linux_amd64/${binary_name} # include additional deployment steps here... the makefile is organized into several sections, each with its own set of targets:\n1.1. helpers help: prints a help message for the makefile, including a list of available targets and their descriptions.\nconfirm: prompts the user to confirm an action with a \u0026#34;y/n\u0026#34; prompt.\nno-dirty: checks that there there are no untracked files or uncommitted changes to the tracked files in the current git repository.\n1.2. quality control audit: runs quality control checks on the codebase, including using go mod tidy -diff to check that the go.mod and go.sum files are up-to-date and correctly formatted, verifying the dependencies with go mod verify, running test -z \u0026#34;$(shell gofmt -l .)\u0026#34; to check that all .go files are correctly formatted, running static analysis with go vet and staticcheck, checking for vulnerabilities using govulncheck, and running all tests. note that it uses go run to execute the latest versions of the remote staticcheck and govulncheck packages, meaning that you don’t need to install these tools first.\ntest: runs all tests. note that we enable the race detector and embed build info in the test binary.\ntest/cover: runs all tests and outputs a coverage report in html format.\n1.3. development tidy: updates the dependencies and formats the go.mod and go.sum using go mod tidy, and formats all .go files using go fmt.\nbuild: builds the package at main_package_path and outputs a binary at /tmp/bin/{binary_name}.\nrun: calls the build target and then runs the binary. note that my main reason for not using go run here is that go run doesn’t embed build info in the binary.\nrun/live: use the air tool to run the application with live reloading enabled. when changes are made to any files with the specified extensions, the application is rebuilt and the binary is re-run.\ndepending on the project you might want to add more to this section, such as targets for connecting to a development database instance and managing sql migrations.\nexample: makefile targets for working with sqlite ## db/connect: create to the local database .phony: db/connect db/connect: sqlite3 db.sqlite ## db/migrations/new name=$1: create a new migration .phony: db/migrations/new db/migrations/new: go run -tags \u0026#39;sqlite3\u0026#39; github.com/golang-migrate/migrate/v4/cmd/migrate@latest create -seq -ext=.sql -dir=./resources/migrations ${name} ## db/migrations/up: apply all up migrations .phony: db/migrations/up db/migrations/up: go run -tags \u0026#39;sqlite3\u0026#39; github.com/golang-migrate/migrate/v4/cmd/migrate@latest -path=./resources/migrations -database=\u0026#34;sqlite3://db.sqlite\u0026#34; up ## db/migrations/down: apply all down migrations .phony: db/migrations/down db/migrations/down: confirm go run -tags \u0026#39;sqlite3\u0026#39; github.com/golang-migrate/migrate/v4/cmd/migrate@latest -path=./resources/migrations -database=\u0026#34;sqlite3://db.sqlite\u0026#34; down ## db/migrations/goto version=$1: migrate to a specific version number .phony: db/migrations/goto db/migrations/goto: confirm go run -tags \u0026#39;sqlite3\u0026#39; github.com/golang-migrate/migrate/v4/cmd/migrate@latest -path=./resources/migrations -database=\u0026#34;sqlite3://db.sqlite\u0026#34; goto ${version} ## db/migrations/force version=$1: force database migration version number .phony: db/migrations/force db/migrations/force: confirm go run -tags \u0026#39;sqlite3\u0026#39; github.com/golang-migrate/migrate/v4/cmd/migrate@latest -path=./resources/migrations -database=\u0026#34;sqlite3://db.sqlite\u0026#34; force ${version} ## db/migrations/version: print the current migration version .phony: db/migrations/version db/migrations/version: go run -tags \u0026#39;sqlite3\u0026#39; github.com/golang-migrate/migrate/v4/cmd/migrate@latest -path=./resources/migrations -database=\u0026#34;sqlite3://db.sqlite\u0026#34; version 1.4. operations push: push changes to the remote git repository. this asks for y/n confirmation first, and automatically runs the audit and no-dirty targets to make sure that all audit checks are passing and there are no uncommitted changes in the repository before the push is executed.\nproduction/deploy: builds the a binary for linux/amd64 architecture, compress it using upx, and then run any deployment steps. note that this target asks for y/n confirmation before anything is executed, and also runs the audit and no-dirty checks too.\ndepending on the project i often add more to this section too. for example, a staging/deploy rule for deploying to a staging server, production/connect for sshing into a production server, production/log for viewing production logs, production/db for connecting to the production database, and production/upgrade for updating and upgrading software on a production server.\n2. usage each of these targets can be executed by running make followed by the target name in your terminal. for example:\nmake tidy go mod tidy -v go fmt ./... if you run make help (or the naked make command without specifiying a target) then you’ll get a description of the available targets.\nmake help usage: help print this help message tidy tidy modfiles and format .go files audit run quality control checks test run all tests test/cover run all tests and display coverage build build the application run run the application run/live run the application with reloading on file changes push push changes to the remote git repository production/deploy deploy the application to production 3. reference https://www.alexedwards.net/blog/a-time-saving-makefile-for-your-go-projects\n","title":"Makefile"},{"date":"2024-10-07","image":"","imageAlt":"","link":"https://hossein-lap.github.io/notes/bash/","summary":"Some bash/shell scripting notes/tips.\n","tags":["Bash","CLI","Shell"],"text":" 1. add colors #!/bin/sh # colors blue=$(tput setaf 4) cyan=$(tput setaf 6) magenta=$(tput setaf 5) yellow=$(tput setaf 3) green=$(tput setaf 2) red=$(tput setaf 1) normal=$(tput sgr0) check() { if [ \u0026#34;${?}\u0026#34; = \u0026#39;0\u0026#39; ]; then printf \u0026#34;${green}done${normal}\u0026#34; printf \u0026#39;\\n\u0026#39; else printf \u0026#34;${red}fail${normal}\u0026#34; printf \u0026#39;\\n\u0026#39; fi } check ","title":"Bash"},{"date":"2024-09-26","image":"","imageAlt":"","link":"https://hossein-lap.github.io/notes/git/","summary":"git and git-worktree (bare repository)\n","tags":["git","vcs"],"text":" 1. init this will create a local git repository.\ngit init also you can git it an initial branch name:\ngit init --initial-branch=trunk 2. config you can configure git to behave how you like it to do.\nsome popular options are: user.name = your name # critical user.email = your@email.com # critical core.editor = vim # default git\u0026#39;s text editor core.autocrlf = input # for fixing eol character across multiple oss commit.gpgsign = true # signed commits using gpg tag.gpgsign = true # // tags // // merge.ff = true # fast-forward only when merging/pulling/etc.. init.defaultbranch = master # default branch for `git init` color.pager = true # colored output e.g `git log --oneline` if you’re wondering how to apply these settings on the command line: git config --global user.name \u0026#34;your name\u0026#34; git config --global user.email you@email.com git config --global merge.ff true 3. staging area middle stage between untracked files and tracked files.\ngit add . git add \u0026lt;path/to/file\u0026gt; to see or do anything on files in the staging area (beside committing them), you need to pass --cached argument to the git subcommand.\ngit rm --cached \u0026lt;file-name\u0026gt; git diff --cached . 4. status show the status of files in current repository.\ngit status on branch notes/git changes not staged for commit: (use \u0026#34;git add \u0026lt;file\u0026gt;...\u0026#34; to update what will be committed) (use \u0026#34;git restore \u0026lt;file\u0026gt;...\u0026#34; to discard changes in working directory) modified: git.adoc untracked files: (use \u0026#34;git add \u0026lt;file\u0026gt;...\u0026#34; to include in what will be committed) .session.vim/ asciidoctor-theme.yml git.pdf no changes added to commit (use \u0026#34;git add\u0026#34; and/or \u0026#34;git commit -a\u0026#34;) short version: git status -s m git.adoc ?? .session.vim/ ?? asciidoctor-theme.yml ?? git.pdf ??: untracked files\nm : modified tracked files\na : files in staging area but not committed\nuu: files having conflicts which needs extra manual/automated work\nif you want to see the status from the current working directory: git status -s . m git.adoc ?? .session.vim/ ?? asciidoctor-theme.yml ?? git.pdf 5. commit look at commit as adding changes to the git history.\ngit commit the command above will open the git’s text editor for you to write a commit message for the changes you’ve made. to avoid that you can give the message at the command line:\ngit commit -m \u0026#39;my very obvious commit message\u0026#39; some extra flags for commit: --no-gpg-sign # don\u0026#39;t sign the commit, just for this one --amend # apply changes to the last commit, no new commit # warning: be careful with this, it can mess things up --no-edit # used with `--amend`, don\u0026#39;t change commit message 5.1. authenticate for committing you need to be authenticated. you can this in a global scope (which is recommended for most users) or do it in a per-repo basis:\nglobal git config --global user.name \u0026#39;you name\u0026#39; git config --global user.email \u0026#39;you@email.com\u0026#39; per repository, inside the local repository git config user.name \u0026#39;you name\u0026#39; git config user.email \u0026#39;you@email.com\u0026#39; keep that in mind for working with services like github.com and gitlab.com, the email you provide to the git, must be the same email as the one which you gave these services.\n6. log shows information about the current repository such as branches, commits, head position, etc.\ngit log commit f80c36530015cb932a4d60c06f94f93cf22570cf author: hossein esmail \u0026lt;hosteam01@gmail.com\u0026gt; date: sun oct 13 23:38:50 2024 +0330 more / better notes for docker commit 6e057f8ee426d75045693f417d9769c8ff2093bd author: hossein esmail \u0026lt;hosteam01@gmail.com\u0026gt; date: fri oct 11 15:17:28 2024 +0330 import contents commit a9555db8084619a61b2da3c51ae04c972a242f94 author: hos es \u0026lt;62862610+hossein-lap@users.noreply.github.com\u0026gt; date: wed oct 9 20:13:41 2024 +0330 initial commit some extra flags --oneline # show short commit hash and only the commit message --all # show all branches --graph # draw the graph for branches --stat # show changed files --show-signature # show gpg signature git log --all --oneline --graph * afd0009 (notes/perl, origin/notes/perl) add array section * f80c365 (head -\u0026gt; notes/git, origin/notes/git) more docker notes * 6e057f8 import contents * a9555db initial commit what is head? head is a name which points to your current working area\u0026#39;s position in the git repository. in the above output, inside the parentheses on the second line you can see head -\u0026gt; notes/git, that mean head is pointing at notes/git branch. notes/git is the name of the branch that i’m writing this document inside of it that will be merged later with master branch of this repository.\nnow that we know head is the current position, let’s be a little more proactive shall we? okay, what about pointing at one previous position or two previous? easy, head~1 and head~2 are for that.\nhead~\u0026lt;number\u0026gt; means \u0026lt;number\u0026gt; times before the current position of head.\n7. remotes the remote url(s) that you are/will be working with. most of the time it’s called origin but remember, it’s just a name which points to an url.\ngit remote origin verbose output git remote -v origin\tgit@github.com:hossein-lap/blog.posts.git (fetch) origin\tgit@github.com:hossein-lap/blog.posts.git (push) working with remotes git remote add \u0026lt;name\u0026gt; \u0026lt;url\u0026gt; # add new remote url git remote remove \u0026lt;name\u0026gt; # remove existing remote url remote url can be another directory/folder on the same machine. git does not care.\nif you want to connect a local repository to a remote one, you need to create the remote yourself\nlet’s say you are working on a project on your local machine and now you’ve decided to share it on github, you go create the repository on github, and create a remote using git remote add \u0026lt;name\u0026gt; \u0026lt;url\u0026gt; command.\n7.1. ssh vs https most developers prefer using ssh when it comes to working with remote repositories. ssh has a sha-256 hash-based key authentication method. unlike https which requires username and password each time for the authentication.\ngenerate ssh key ssh-keygen after creating a ssh key-pair, you need to add the public pair of the key to your github/gitlab account. look for a *.pub file in your ~/.ssh directory.\nssh remote url: origin\tgit@github.com:hossein-lap/blog.posts.git (fetch) origin\tgit@github.com:hossein-lap/blog.posts.git (push) https remote url: origin\thttps://github.com/hossein-lap/blog.posts (fetch) origin\thttps://github.com/hossein-lap/blog.posts (push) 8. clone cloning a repository is like downloading it from your local machine but with or without the commit histories.\ngit clone \u0026lt;url\u0026gt; git clone https://github.com/hossein-lap/blog.posts git clone git@github.com:hossein-lap/blog.posts.git some extra flags --depth \u0026lt;number\u0026gt; # depths of previous commit history --branch \u0026lt;name\u0026gt; # move head to the \u0026lt;name\u0026gt; branch after clone --origin \u0026lt;name\u0026gt; # use \u0026lt;name\u0026gt; instead of default `origin` for remote --bare # clone the bare repo (useful but very advanced) # see the last section for more information. 9. fetch synchronize the local repository with the remote repository. this does not change anything in the current working area. just synchronizing.\ngit fetch --all # fetch all changes from all branches git fetch --unshallow # fetch all the missing contents from remote 10. push upload the git history from local to the remote.\ngit push \u0026lt;remote-name\u0026gt; \u0026lt;branch-name\u0026gt; git push origin master forced push you need to use --force flag if you want to have used --amend flag (you’ve amended a commit) when pushing to a unprotected remote branch.\ngit commit --amend --no-edit git push origin feature/new-module --force use this with caution if the branch if protected you cannot use --force with. you must remove it from protected branches first.\n11. pull get the changes from remote repository to the local repository.\ngit pull origin master be careful what branch are you currently on and what branch are you pulling from. this can mess things up very easily.\n12. branch working with branches. branches are created from one point in the history which is you current branch\nyour current branch git branch * notes/git create new branch git switch -c \u0026lt;new-branch-name\u0026gt; above command will create a new branch from your current position on the git history (your current branch, your current commit) and switch to it.\nalternatively you can use checkout (sometimes you need to use checkout) but the checkout command does a lot more than creating/switching branches. it can be dangerous.\ngit checkout -b \u0026lt;new-branch-name\u0026gt; switch back to previous branch git checkout - git switch - 13. stash to be able to change branches your current working area must be clean. now imagine you’re middle of working on something and something new comes up which is important, git won’t allow you to change your branch until you commit your changes (make your working area clean) so what you’re gonna do? apply a temp commit? (you can do that on paper but it’s advised against doing this). here stash comes to save the day.\ngit stash takes all your changes (on tracked files only) and temporarily moves them on stash area so you can access it (move it back to your working area) after you’ve did you explorations.\nlet’s see how git log looks like before stashing the changes:\nmove changes to stash from working area git log --oneline --all --graph * afd0009 add array section * f80c365 more / better notes for docker * 6e057f8 import contents * a9555db initial commit stashing changes git stash push saved working directory and index state wip on notes/git: f80c365 more / better notes for docker let’s see how git log looks like at this point\ngit log --oneline --all --graph * aa604f7 wip on notes/git: f80c365 more / better notes for docker |\\ | * 977460d index on notes/git: f80c365 more / better notes for docker |/ | * afd0009 add array section |/ * f80c365 more / better notes for docker * 6e057f8 import contents * a9555db initial commit see all the new forks and diversions from the commits?\n* aa604f7 wip on notes/git: f80c365 more / better notes for docker |\\ | * 977460d index on notes/git: f80c365 more / better notes for docker |/ | * afd0009 add array section |/ * f80c365 more / better notes for docker move back changes to working area from stash git stash pop on branch notes/git changes not staged for commit: (use \u0026#34;git add \u0026lt;file\u0026gt;...\u0026#34; to update what will be committed) (use \u0026#34;git restore \u0026lt;file\u0026gt;...\u0026#34; to discard changes in working directory) modified: git.adoc untracked files: (use \u0026#34;git add \u0026lt;file\u0026gt;...\u0026#34; to include in what will be committed) .session.vim/ asciidoctor-theme.yml git.pdf git.xml no changes added to commit (use \u0026#34;git add\u0026#34; and/or \u0026#34;git commit -a\u0026#34;) dropped refs/stash@{0} (a5eec65b3011ad09cd73c9845646ea1b87659f9e) now everything is exactly how it was before stashing:\ngit log --oneline --all --graph * afd0009 add array section * f80c365 more / better notes for docker * 6e057f8 import contents * a9555db initial commit stash has a stack-like structure.\nalternatively you can use a bare repo with git’s worktree feature which allows you to have multiple branches checked-out at the same time. but it can add complexity to your workflow. you can take a look at the last section of this document.\n14. rebase rebasing a branch is pulling the point branch was forked (created from) to a new point.\ngit’s manpage does a good explanation about it: assume the following history exists and the current branch is \u0026#34;topic\u0026#34;: a---b---c topic / d---e---f---g master from this point, the result of either of the following commands: git rebase master git rebase master topic would be: a\u0026#39;--b\u0026#39;--c\u0026#39; topic / d---e---f---g master all the git manpages are available through either git \u0026lt;subcommand\u0026gt; --help command or man git-\u0026lt;subcommand\u0026gt; command on the command line.\ngit rebase --help man git-rebase 15. restore restores the state of file(s) to a previous or current state in git history.\ngit restore --source=head . the above command will remove all changes on the current working directory which are not in neither staging area nor have been committed.\nthe . means current working directory. you can replace it with file name(s) or (some) directory.\n16. reset okay, now we are entering the danger zone. the reset command will remove your commit history. especially with the --hard flag.\ngit reset --hard head~1 git reset --hard 6e057f8 # reset everything to a certain point # using commit hash 17. patching you can get a diff file using git diff command and use it later. these \u0026#34;diff\u0026#34; files contains all changes on file(s) which can be applied on same files somewhere else.\nget diff file git diff head~1 head \u0026gt; \u0026lt;file-name\u0026gt; git diff head~1 head \u0026gt; test-changes.diff apply the diff patch -p1 \u0026lt; \u0026lt;file-name\u0026gt; patch -p1 \u0026lt; test-changes.diff keep that in mind which the sequence of stages/commits must be older to newer if you want to apply the changes and newer to older if you want to revert the changes. reverts\nolder to newer: applies changes\nnewer to older: reverts changes\nthis process is called patching or applying patch.\nwhen you are applying patch(es), you must be at the exact directory that you’ve get the diff file from.\non the other words, applying patches only works when you are applying them at the same root directory of getting the patch (diff file).\na diff file git diff makefile default-theme.yml diff --git a/makefile b/makefile index 16ab52b..db20550 100644 --- a/makefile +++ b/makefile @@ -1,6 +1,6 @@ name = ttr all: -\tasciidoctor -a stylesheet=my-stylesheet.css ttr.adoc -\t# asciidoctor -a linkcss -a copycss readme.adoc +\t# asciidoctor -a stylesheet=my-stylesheet.css ttr.adoc +\tasciidoctor -a linkcss -a copycss ttr.adoc asciidoctor-pdf ttr.adoc --theme hos.yml diff --git a/default-theme.yml b/default-theme.yml index f23711b..889785a 100644 --- a/default-theme.yml +++ b/default-theme.yml @@ -43,11 +43,11 @@ base: border_color: eeeeee border_radius: 4 border_width: 0.5 -base: - font: - color: #333333 - family: times-roman - size: 12 +# base: +# font: +# color: #333333 +# family: times-roman +# size: 12 role: lead: font_size: $base_font_size_large 18. git worktree and bare repos this section is a very advanced topic and is unique approach to solving some problems like changing branches and checking them out at the same time.\nin this approach, every branch is a separated directory. to changes branches you need to change your current working directory (e.g cd ../\u0026lt;branch-name\u0026gt;).\nclone bare repo git clone --bare git@github.com:hossein-lap/blog.git blog.git create worktree git worktree add \u0026lt;branch-name\u0026gt; with new branch git worktree add -b \u0026lt;new-branch-name\u0026gt; \u0026lt;new-directory-name\u0026gt; remove worktree git worktree remove \u0026lt;branch-name\u0026gt; cloning a repository bare, requires to add the .git at the end of url.\nyou still can change (mess things up if you will) other branches while you are on a different branch. be careful with that.\n18.1. wrapper script #!/usr/bin/env bash set -e # help function prompt=$(echo ${0} | awk -f \u0026#39;/\u0026#39; \u0026#39;{print $nf;}\u0026#39;) help() { cat \u0026lt;\u0026lt; eof ${prompt}: setup git worktree and bare repo usage: [-h] [-u url] [-d directory] [-a extra_args] • arguemts: -u --url repo url (ssh) -d --dir directory name -a --args extra args (to pass to the git) -h --help print this message • example: ${prompt} -u gitlab.com:hos-workflow/scripts -d test.git -a \u0026#39;--depth 1\u0026#39; • running without any arguments will show this message eof } # argument parsing while [ \u0026#34;${#}\u0026#34; -gt 0 ]; do case ${1} in -u|--url) input=\u0026#34;${2}\u0026#34; shift ;; -d|--directory) output=\u0026#34;${2}\u0026#34; shift ;; -h|--help) help exit 0 ;; -a|--args) args=\u0026#34;${args} ${2}\u0026#34; shift ;; *) echo \u0026#34;unknown parameter passed: ${1}\u0026#34; exit 1 ;; esac shift done # checking args if [ -z \u0026#34;${input}\u0026#34; ]; then printf \u0026#39;%s\\n\\n\u0026#39; \u0026#34;no url is specified\u0026#34; 1\u0026gt;\u0026amp;2 help exit 1 fi if [ -z \u0026#34;${output}\u0026#34; ]; then printf \\ \u0026#34;no directory name is specified, \u0026#34; \\ \u0026#34;using default directory name..\\n\u0026#34; \\ 1\u0026gt;\u0026amp;2 output=\u0026#34;$(echo ${input} | awk -f \u0026#39;/\u0026#39; \u0026#39;{print $nf;}\u0026#39;)\u0026#34; fi # start git clone ${args} --bare git@${input} ${output} cd ${output} mkdir .bare mv * .bare echo \u0026#34;gitdir: ./.bare\u0026#34; \u0026gt; .git check_branch=$(git --no-pager branch | grep -v \u0026#39;*\\|+\u0026#39; | awk \u0026#39;{print $1;}\u0026#39; | wc -l) if [ \u0026#34;${check_branch}\u0026#34; -gt 0 ]; then for i in $(git --no-pager branch | sed \u0026#39;s/^[*+]/ /\u0026#39; | awk \u0026#39;{print $1;}\u0026#39;); do git worktree add \u0026#34;${i}\u0026#34; \u0026#34;${i}\u0026#34; done else i=$(git --no-pager branch | awk \u0026#39;{print $nf;}\u0026#39;) git worktree add \u0026#34;${i}\u0026#34; \u0026#34;${i}\u0026#34; fi # git config remote.origin.url \u0026#34;git@${input}\u0026#34; git config remote.origin.fetch \u0026#39;+refs/heads/*:refs/remotes/origin/*\u0026#39; git fetch ","title":"Git"},{"date":"2024-09-14","image":"","imageAlt":"","link":"https://hossein-lap.github.io/notes/docker/","summary":"Some notes about docker container manager\n","tags":["container","docker"],"text":" 1. intro yeah i don’t like long intros either, but this one needs a little more digging. let’s begin.\n1.1. what is docker? docker is a container management service. you may also hear it referred as container engine. all it can do is create, run and manage containers. let’s go a little bit deeper.\n1.2. what is a container let me put it this way, what you need to run a program? a computer (servers are also computers) and what a computer (beside hardware) has? software. now what software do you use to work with the computer’s hardware? operating system. containers are just a small isolated things that emulates a operating system. in a different approach we can say: using os-level virtualization to deliver software in packages called containers.\n1.3. containers vs. virtual-machines every vm requires its own dedicated operating system (os) is a major flaw. every os consumes cpu, ram and other resources that could otherwise be used to power more applications. every os needs patching and monitoring. and in some cases, every os requires a license. all of this results in wasted time and resources.\na major difference is that containers do not require their own full-blown os. in fact, all containers on a single host share the host’s os. this frees up huge amounts of system resources such as cpu, ram, and storage. it also reduces potential licensing costs and reduces the overhead of os patching and other maintenance.\n1.4. linux containers modern containers started in the linux world and are the product of an immense amount of work from a wide variety of people over a long period of time. just as one example, google llc has contributed many container-related technologies to the linux kernel. without these, and other contributions, we wouldn’t have modern containers today.\nthere are many operating system virtualization technologies similar to containers that pre-date docker and modern containers. some even date back to system/360 on the mainframe. bsd jails and solaris zones are some other well-known examples of unix-type container technologies.\n2. basics pulling an image docker image pull ubuntu:latest 2.1. dockerfile you can create your own docker image from a file called dockerfile. this file includes instructions to build an application. instructions like installing dependencies, copying files, running compile / build commands and so on. things that needs to be done for preparing the environment that you app will run in it.\ndockerfile — simple webapp from alpine label maintainer=\u0026#34;example@mail.com\u0026#34; run apk add --update nodejs nodejs-npm copy . /src workdir /src run npm install expose 8080 entrypoint [\u0026#34;node\u0026#34;, \u0026#34;./app.js\u0026#34;] example 1. keywords from: the base image to use\nlabel: image’s metadata\nrun: command to run inside the image at build time\ncopy: copy files from \u0026lt;local\u0026gt; to \u0026lt;image\u0026gt;\nworkdir: change the working directory\nnote that if the directory does not exists, it will be created\nexpose: the port that will be exposed\navailable to the host/other images\nentrypoint: the command that will be run at the end\nthe actual app; all the previous commands are just a preparation for this command/section\ndockerfile — build image docker buildx build -f dockerfile -t test-name . [+] building 35.5s (10/10) finished docker:default =\u0026gt; [internal] load build definition from dockerfile 0.0s =\u0026gt; =\u0026gt; transferring dockerfile: 363b 0.0s =\u0026gt; [internal] load .dockerignore 0.0s =\u0026gt; =\u0026gt; transferring context: 2b 0.0s =\u0026gt; [internal] load metadata for docker.io/library/alpine:latest 0.0s =\u0026gt; [1/5] from docker.io/library/alpine 0.0s =\u0026gt; [internal] load build context 0.0s =\u0026gt; =\u0026gt; transferring context: 36.77kb 0.0s =\u0026gt; [2/5] run apk add --update nodejs npm curl 9.2s =\u0026gt; [3/5] copy . /src 0.0s =\u0026gt; [4/5] workdir /src 0.0s =\u0026gt; [5/5] run npm install 26.0s =\u0026gt; exporting to image 0.2s =\u0026gt; =\u0026gt; exporting layers 0.2s =\u0026gt; =\u0026gt; writing image sha256:1825da98372a937a095e523f71f59dcd6a4c41f6f0f573ed1bfe118fae8d50ed 0.0s =\u0026gt; =\u0026gt; naming to docker.io/library/test 0.0s docker cli — get list of images docker image ls repository tag image id created size test latest 1825da98372a 6 minutes ago 95.4mb docker cli — run an image/container docker container run -d --name web1 --publish 8080:8080 test:latest 63e334d59c7d937c99f6cbe6e5628c3b180ab26cb4b3f7e3d2cdd007cfd78f37 docker cli — get list of running images/containers docker ps container id image command created status ports names 63e334d59c7d test:latest \u0026#34;node ./app.js\u0026#34; 14 seconds ago up 13 seconds 0.0.0.0:8080-\u0026gt;8080/tcp, :::8080-\u0026gt;8080/tcp web1 you can also use multiple images inside one container:\nmulti-stage dockerfile # pull golang image to build the app from golang:alpine as builder # add a label label maintainer=\u0026#34;hossein esmailzadeh \u0026lt;hosteam01@gmail.com\u0026gt;\u0026#34; ## inside golang:alpine image # change the working directory workdir /app # copy golang\u0026#39;s related files (checksum and module files) copy go.mod go.sum ./ # get the needed modules run go mod download # copy the source code copy . . # compile the app run cgo_enabled=0 goos=linux go build -a -installsuffix cgo -o main . ## inside our image # use a alpine (very small os) image as base from alpine:latest # install dependencies run apk --no-cache add ca-certificates # change the working directory workdir /root/ # copy the built binary from the golang:alpine image inside our container copy --from=builder /app/main . # let port 9090 to be accessible for others expose 9090 # run the binary at the end cmd [\u0026#34;./main\u0026#34;] ","title":"Docker"},{"date":"2024-09-11","image":"","imageAlt":"","link":"https://hossein-lap.github.io/notes/perl/","summary":"Perl programming language notes/tutorials\n","tags":["legacy","perl","script"],"text":" hello world! #!/bin/perl use warnings; print(\u0026#34;hello world!\\n\u0026#34;); use warnings; is called pragma in perl. this pragma instructs perl to turn on additional warning reporting.\n1. perl syntax basic perl syntax to get started with perl language quickly including variables, expressions, statements, block, comments, whitespaces, and keywords.\n1.1. values and variables you develop perl programs to manipulate some kinds of data. the data can be either numbers, strings, or more complex such as a list. data is held as value.\nsome values 10 20.2 \u0026#34;perl syntax\u0026#34; to hold a piece of data, you need variables. you use a variable to store a value. and through the name of the variable, you can process the value.\nthe following illustrates some variables in perl:\ndefine variables $x = 10; $y = 20; $s = \u0026#34;perl string\u0026#34;; we have two integer variables ($x and $y) and one string variable ($s). for more information on perl variables, check it out the perl variables.\n1.2. expressions in perl, an expression is anything that returns a value.\nthe expression can be used in a larger expression or a statement. the expression can be a literal number, complex expression with operators, or a function (aka subroutine), call.\nfor example, 3 is an expression that returns a value of 3. the $a + $b is an expression that returns the sum of two variables: $a and $b.\n1.3. statements a statement is made up of expressions. a statement is executed by perl at run-time.\neach perl statement must end with a semicolon (;). the following example shows the statements in perl:\n$c = $a + $b; print($c); 1.4. blocks a block is made up of statements wrapped in curly braces {}. you use blocks to organize statements in the program.\nthe following example illustrates a block in perl:\n{ $a = 1; $a = $a + 1; print($a); } any variable declared inside a block has its own scope.\nit means the variables declared inside a block only last as long as the block is executed.\n1.5. comments in perl, a comment begins with a hash (#) character. perl interpreter ignores comments at both compile-time and runtime.\ntypically, you use comments to document the logic of your code. the code tells you what it does however comments provides information on why the code does so.\ncomments are very important and useful to you as a programmer in order to understand the code later. they’re also useful to other programmers who will read and maintain your programs in the future.\nlet’s take a look at the following example:\n$salary = $salary + 1.05; what the code does is to increase the value of the variable $salary 5%. however, why it does so was not documented.\ntherefore the following code with comment is much clearer.\n# increase salary %5 for employees who achieve kpi $salary = $salary + 1.05; perl also allows you to place a comment on the same line as the statement. see the following example:\n$counter = 0; # reset the counter it is important to use comments properly to make your code easier to understand.\n1.6. whitespace whitespaces are spaces, tabs, and newlines. perl is very flexible in terms of whitespaces usages. consider the following example:\n$x = 20; $y=20; both lines of code work perfectly. we surrounded the assignment operator (=) with whitespace in the first statement, but not in the second one.\nperl really doesn’t care about the whitespace. however, it is a good practice to use whitespace to make the code more readable.\n1.7. keywords perl has a set of keywords that have special meanings to its language.\nperl keywords fall into some categories such as built-in function and control keywords.\nyou should always avoid using keywords to name variables, functions, modules, and other objects. check it out the perl keywords.\nsometimes, it is fine to use a variable name such as $print, which is similar to the built-in print() function. however, this may lead to confusion. in addition, if the program has an issue, it’s more difficult to troubleshoot.\n2. perl variables to manipulate data in your program, you use variables.\nperl provides three types of variables: scalars, lists, and hashes to help you manipulate the corresponding data types including scalars, lists, and hashes.\nwe’ll focus on the scalar variable in this section.\n2.1. naming variables you use scalar variables to manipulate scalar data such as numbers and strings,\na scalar variable starts with a dollar sign ($), followed by a letter or underscore, after that, any combination of numbers, letters, and underscores. the name of a variable can be up to 255 characters.\nperl is case-sensitive. the $variable and $variable are different variables.\nperl uses the dollar sign ($) as a prefix for the scalar variables because of the $ looks like the character s in the scalar. you can use this tip to remember when you want to declare a scalar variable.\nvalid variables: $gate = 10; $_port = 20; invalid variables: $4whatever = 20; # no letter or underscore found after dollar sign ($) $email-address = \u0026#34;zen@example.com\u0026#34;; # special character (-) found $home url = \u0026#34;http://localhost/perltutorial\u0026#34;; # space is not allowed 2.2. declaring variables perl doesn’t require you to declare a variable before using it.\nfor example, you can introduce a variable in your program and use it right away as follows:\n$a = 10; $b = 20; $c = $a + $b; print($c); in some cases, using a variable without declaring it explicitly may lead to problems. let’s take a look at the following example:\n$color = \u0026#39;red\u0026#39;; print \u0026#34;your favorite color is \u0026#34; . $colour . \u0026#34;\\n\u0026#34;; the expected output was your favorite color is red.\nhowever, in this case, you got your favorite color is, because the $color and $colour are different variables. the mistake was made because of the different variable names.\nto prevent such cases, perl provides a pragma called strict that requires you to declare variable explicitly before using it.\nin this case, if you use the my keyword to declare a variable and try to run the script, perl will issue an error message indicating that a compilation error occurred due to the $colour variable must be declared explicitly.\n#!/usr/bin/perl use strict; my $color = \u0026#39;red\u0026#39;; print \u0026#34;your favorite color is \u0026#34; . $colour . \u0026#34;\\n\u0026#34; a variable declared with the my keyword is a lexically scoped variable.\nit means the variable is only accessible inside the enclosing block or all blocks nested inside the enclosing block. in other words, the variable is local to the enclosing block.\nnow, you’ll learn a very important concept in programming called variable scopes.\n2.3. perl variable scopes let’s take a look at the following example:\n#!/usr/bin/perl use warnings; $color = \u0026#39;red\u0026#39;; print(\u0026#34;my favorite #1 color is \u0026#34; . $color . \u0026#34;\\n\u0026#34;); # another block { my $color = \u0026#39;blue\u0026#39;; print(\u0026#34;my favorite #2 color is \u0026#34; . $color . \u0026#34;\\n\u0026#34;); } # for checking print(\u0026#34;my favorite #1 color is \u0026#34; . $color . \u0026#34;\\n\u0026#34;); in the example above first, declared a global variable named $color\nthen, displayed the favorite color by referring to the $color variable. as expected, we get the red color in this case\nnext, created a new block and declared a variable with the same name $color using the my keyword. the $color variable is lexical. it is a local variable and only visible inside the enclosing block\nafter that, inside the block, we displayed the favorite color and we got the blue color. the local variable takes priority in this case\nfinally, following the block, we referred to the $color variable and perl referred to the $color global variable\nif you want to declare global variables that are visible throughout your program or from external packages, you can use our keyword as shown in the following code:\nour $color = \u0026#39;red\u0026#39;; 2.4. perl variable interpolation perl interpolates variables in double-quoted strings. it means if you place a variable inside a double-quoted string, you’ll get the value of the variable instead of its name.\nlet’s take a look at the following example:\n#!/usr/bin/perl use strict; use warnings; my $amount = 20; my $s = \u0026#34;the amount is $amount\\n\u0026#34;; print($s); perl interpolates the value of $amount into the string which is 20.\nperl only interpolates scalar variables and array, not hashes. in addition, the interpolation is only applied to the double-quoted string, but not the single-quoted string\n3. perl numbers perl has two kinds of numbers: integer and floating-point numbers.\n3.1. perl integers integers are whole numbers that have no digits after the decimal points i.e 10, -20 or 100.\nin perl, integers are often expressed as decimal integers, base 10. the following illustrates some integer numbers:\n#!/usr/bin/perl use warnings; use strict; $x = 20; $y = 100; $z = -200; when the integer number is big, you often use a comma as a separator to make it easier to read e.g., 123,763,213.\nhowever, perl already uses a comma (,) as a separator in the list so for integer numbers perl uses an underscore character (_) instead. in this case, 123,763,213 is written in perl as 123_763_213.\ntake a look at the following example:\nmy $a = 123_763_213; print($a, \u0026#34;\\n\u0026#34;); # 123763213 in the output of the example above, perl uses no comma or underscore as the separator.\nbesides the decimal format, perl also supports other formats including binary, octal, and hexadecimal.\nthe following table shows you prefixes for formatting with binary, octal, and hexadecimal integers.\nnumber format 0b123\nbinary integer using a prefix of 0b\n0255\noctal integer using a prefix of 0\n0xabc\nhexadecimal integer using a prefix of 0x\nall the following integer numbers are 12 in perl:\n12 0b1100 014 0xc 3.2. perl floating-point numbers you use floating-point numbers to store real numbers. perl represents floating-point numbers in two forms:\nfixed point: the decimal point is fixed in the number to denote fractional part starts e.g., 100.25\nscientific: consists of a significand with the actual number value and an exponent representing the power of 10 that the significand is multiplied by, for example, +1.0025e2 or -1.0025e2 is 100.25.\nthe floating-point number holds 8 bytes, with 11 bits reserved for the exponent and 53 bits for significand.\nthe range of floating-point numbers is essentially determined by the standard c library of the underlying platform where perl is running.\n4. perl string perl’s built-in string functions to manipulate strings.\n4.1. introduction to perl strings in perl, a string is a sequence of characters surrounded by some kind of quotation marks. a string can contain ascii, unicode, and escape sequences characters such as \\n.\na perl string has a length that depends on the amount of memory in your system, which is theoretically unlimited.\nthe following example demonstrates single and double-quoted strings.\nmy $s1 = \u0026#34;string with doubled-quotes\u0026#34;; my $s2 = \u0026#39;string with single quote\u0026#39;; it is important to remember that the double-quoted string replaces variables inside it by their values, while the single-quoted string treats them as text. this is known as variable interpolation in perl.\n4.2. perl string alternative delimiters besides the single and double quotes, perl also allows you to use quote-like operators such as:\nthe q// acts like a single-quoted string.\nthe qq// acts like double-quoted string\nyou can choose any non-alphabetic and non-numeric characters as the delimiters, not only just characters //.\n#!/usr/bin/perl use warnings; use strict; my $s= q/\u0026#34;are you learning perl string today?\u0026#34; we asked./; print($s ,\u0026#34;\\n\u0026#34;); my $name = \u0026#39;jack\u0026#39;; my $s2 = qq/\u0026#34;are you learning perl string today?\u0026#34;$name asked./; print($s2 ,\u0026#34;\\n\u0026#34;); how it works first, defined a single-quoted string variable with the quote-like operator q/. the string $s ends with /\nsecond, defined a double-quoted string with the quote-like operator qq/. in this case, we used the $name variable inside a string and it is replaced by its value, jack\nthe following example demonstrates string with the ^ delimiter.\n#!/usr/bin/perl use warnings; use strict; my $s = q^a string with different delimiter ^; print($s,\u0026#34;\\n\u0026#34;); 4.3. perl string functions perl provides a set of functions that allow you to manipulate strings effectively. we cover the most commonly used string functions in the following section for your reference.\nperl string length to find the number of characters in a string, you use the length() function.\nmy $s = \u0026#34;this is a string\\n\u0026#34;; print(length($s),\u0026#34;\\n\u0026#34;); #17 changing cases of string to change the cases of a string you use a pair of functions lc() and uc() that returns the lowercase and uppercase versions of a string.\nmy $s = \u0026#34;change cases of a string\\n\u0026#34;; print(\u0026#34;to upper case:\\n\u0026#34;); print(uc($s),\u0026#34;\\n\u0026#34;); print(\u0026#34;to lower case:\\n\u0026#34;); print(lc($s),\u0026#34;\\n\u0026#34;); search for a substring inside a string to search for a substring inside a string, you use index() and rindex() functions.\nthe index() function searches for a substring inside a string from a specified position and returns the position of the first occurrence of the substring in the searched string. if the position is omitted, it searches from the beginning of the string.\nthe rindex() function works like the index() function except it searches from the end of the string instead of from the beginning.\nthe following example demonstrates how to use the index() and rindex() functions:\n#!/usr/bin/perl use warnings; use strict; my $s = \u0026#34;learning perl is easy\\n\u0026#34;; my $sub = \u0026#34;perl\u0026#34;; my $p = index($s,$sub); # rindex($s,$sub); print(qq\\the substring \u0026#34;$sub\u0026#34; found at position \u0026#34;$p\u0026#34; in string \u0026#34;$s\u0026#34;\\,\u0026#34;\\n\u0026#34;); get or modify substring inside a string to extract a substring out of a string, you use the substr() function.\n#!/usr/bin/perl use warnings; use strict; # extract substring my $s = \u0026#34;green is my favorite color\u0026#34;; my $color = substr($s, 0, 5); # green my $end = substr($s, -5); # color print($end,\u0026#34;:\u0026#34;,$color,\u0026#34;\\n\u0026#34;); # replace substring substr($s, 0, 5, \u0026#34;red\u0026#34;); #red is my favorite color print($s,\u0026#34;\\n\u0026#34;); other useful perl string functions the following table illustrates other useful perl string functions with their descriptions:\nfunction description chr\nreturn ascii or unicode character of a number\ncrypt\nencrypts passwords in one way fashion\nhex\nconverts a hexadecimal string to the corresponding value\nindex\nsearches for a substring inside a string returns position where the first occurrence of the substring found\nlc\nreturns a lowercase version of the string\nlength\nreturns the number of characters of a string\noct\nconverts a string to an octal number\nord\nreturns the numeric value of the first character of a string\nq/string/\ncreates single-quoted strings\nqq/string/\ncreates double-quoted strings\nreverse\nreverses a string\nrindex\nsearches for a substring from right to left\nsprintf\nformats string to be used with print()\nsubstr\ngets or modifies a substring in a string\nuc\nreturns the uppercase version of the string\n5. perl operator perl operators including numeric operators, string operators, and logical operators.\n5.1. numeric operators perl provides numeric operators to help you operate on numbers including arithmetic, boolean and bitwise operations. let’s examine the different kinds of operators in more detail.\narithmetic operators perl arithmetic operators deal with basic math such as adding, subtracting, multiplying, diving, etc. to add (+) or subtract (-) numbers, you would do something as follows:\n#!/usr/bin/perl use warnings; use strict; print 10 + 20, \u0026#34;\\n\u0026#34;; # 30 print 20 - 10, \u0026#34;\\n\u0026#34;; # 10 to multiply or divide numbers, you use divide (/) and multiply (*) operators as follows:\n#!/usr/bin/perl use warnings; use strict; print 10 * 20, \u0026#34;\\n\u0026#34;; # 200 print 20 / 10, \u0026#34;\\n\u0026#34;; # 2 when you combine adding, subtracting, multiplying, and dividing operators together, perl will perform the calculation in an order, which is known as operator precedence.\nthe multiply and divide operators have higher precedence than add and subtract operators, therefore, perl performs multiplying and dividing before adding and subtracting. see the following example:\nprint 10 + 20/2 - 5 * 2 , \u0026#34;\\n\u0026#34;; # 10 perl performs 20/2 and 5*2 first, therefore you will get 10 + 10 – 10 = 10.\nyou can use brackets () to force perl to perform calculations based on the precedence you want as shown in the following example:\nprint (((10 + 20) / 2 - 5) * 2); # 20; to raise one number to the power of another number, you use the exponentiation operator.\nexponentiation operators: #!/usr/bin/perl use warnings; use strict; print 2**3, \u0026#34;\\n\u0026#34;; # = 2 * 2 * 2 = 8. print 3**4, \u0026#34;\\n\u0026#34;; # = 3 * 3 * 3 * 3 = 81. to get the remainder of the division of one number by another, you use the modulo operator (%).\nit is handy to use the modulo operator (%) to check if a number is odd or even by dividing it by 2 to get the remainder. if the remainder is zero, the number is even, otherwise, the number is odd. see the following example:\n#!/usr/bin/perl use warnings; use strict; print 4 % 2, \u0026#34;\\n\u0026#34;; # 0 even print 5 % 2, \u0026#34;\\n\u0026#34;; # 1 odd bitwise operators bitwise operators allow you to operate on numbers one bit at a time. think of a number as a series of bits e.g., 125 can be represented in binary form as 1111101. perl provides all basic bitwise operators including and (\u0026amp;), or (|), exclusive or (^) , not (~) operators, shift right (\u0026gt;\u0026gt;), and shift left (\u0026lt;\u0026lt;) operators.\nthe bitwise operators perform from right to left. in other words, bitwise operators perform from the rightmost bit to the leftmost bit.\nbitwise operations #!/usr/bin/perl use warnings; use strict; my $a = 0b0101; # 5 my $b = 0b0011; # 3 my $c = $a \u0026amp; $b; # 0001 or 1 print $c, \u0026#34;\\n\u0026#34;; $c = $a | $b; # 0111 or 7 print $c, \u0026#34;\\n\u0026#34;; $c = $a ^ $b; # 0110 or 6 print $c, \u0026#34;\\n\u0026#34;; $c = ~$a; # 11111111111111111111111111111010 (64bits computer) or 4294967290 print $c, \u0026#34;\\n\u0026#34;; $c = $a \u0026gt;\u0026gt; 1; # 0101 shift right 1 bit, 010 or 2 print $c, \u0026#34;\\n\u0026#34;; $c = $a \u0026lt;\u0026lt; 1; # 0101 shift left 1 bit, 1010 or 10 print $c, \u0026#34;\\n\u0026#34;; table 1. comparison operators for numbers equality operators equal\n==\nnot equal\n!=\ncomparison\n\u0026lt;⇒\nless than\n\u0026lt;\ngreater than\n\u0026gt;\nless than or equal\n⇐\ngreater than or equal\n\u0026gt;=\nall the operators in the table above are obvious except the number comparison operator \u0026lt;⇒ which is also known as spaceship operator.\nthe number comparison operator is often used in sorting numbers. see the code below:\n$a \u0026lt;=\u0026gt; $b 1 if $a is greater than $b\n0 if $a and $b are equal\n-1 if $a is lower than $b\nexample #!/usr/bin/perl use warnings; use strict; my $a = 10; my $b = 20; print $a \u0026lt;=\u0026gt; $b, \u0026#34;\\n\u0026#34;; $b = 10; print $a \u0026lt;=\u0026gt; $b, \u0026#34;\\n\u0026#34;; $b = 5; print $a \u0026lt;=\u0026gt; $b, \u0026#34;\\n\u0026#34;; 5.2. string operators table 2. comparison operators equality operators equal\neq\nnot equal\nne\ncomparison\ncmp\nless than\nlt\ngreater than\ngt\nless than or equal\nle\ngreater than or equal\nge\nconcatenation operators perl provides the concatenation (.) and repetition (x) operators that allow you to manipulate strings\nconcatenation operator (.) print \u0026#34;this is\u0026#34; . \u0026#34; concatenation operator\u0026#34; . \u0026#34;\\n\u0026#34;; repetition operators (x) print \u0026#34;a message \u0026#34; x 4, \u0026#34;\\n\u0026#34;; the chomp() operator the chomp() operator (or function) removes the last character in a string and returns a number of characters that were removed. the chomp() operator is very useful when dealing with the user’s input because it helps you remove the new line character \\n from the string that the user entered.\n#!/usr/bin/perl use warnings; use strict; my $s; chomp($s = \u0026lt;stdin\u0026gt;); print $s; the \u0026lt;stdin\u0026gt; is used to get input from users. 5.3. logical operators logical operators are often used in control statements such as if, while, given, etc., to control the flow of the program. the following are logical operators in perl:\n$a \u0026amp;\u0026amp; $b performs the logic and of two variables or expressions. the logical \u0026amp;\u0026amp; operator checks if both variables or expressions are true.\n$a || $b performs the logic or of two variables or expressions. the logical || operator checks whether a variable or expression is true.\n!$a performs the logic not of the variable or expression. the logic ! operator inverts the value of the following variable or expression. in the other words, it converts true to false or false to true.\n6. perl list perl list and how to manipulate list elements using various techniques such as list slicing, ranging and qw() function.\na perl list is a sequence of scalar values. you use parenthesis and comma operators to construct a list. each value is the list is called list element. list elements are indexed and ordered. you can refer to each element by its position.\n6.1. simple perl list (); (10,20,30); (\u0026#34;this\u0026#34;, \u0026#34;is\u0026#34;, \u0026#34;a\u0026#34;,\u0026#34;list\u0026#34;); in the example above: the first list () is an empty list.\nthe second list (10,20,30) is a list of integers.\nthe third list (\u0026#34;this\u0026#34;, \u0026#34;is\u0026#34;, \u0026#34;a\u0026#34;,\u0026#34;list\u0026#34;) is a list of strings.\neach element in the list is separated by a comma (,). the print` operator is a list operator. so let’s display our lists above with the print operator to see how it works:\n#!/usr/bin/perl use warnings; use strict; print(()); # display nothing print(\u0026#34;\\n\u0026#34;); print(10,20,30); # display 102030 print(\u0026#34;\\n\u0026#34;); print(\u0026#34;this\u0026#34;, \u0026#34;is\u0026#34;, \u0026#34;a\u0026#34;,\u0026#34;list\u0026#34;); # display: thisisalist print(\u0026#34;\\n\u0026#34;); we passed several lists to the print operator to display their elements. all the lists that we have seen so far contain an element with the same data type. these lists are called simple lists.\n6.2. complex perl list a perl list may contain elements that have different data types. this kind of list is called a complex list. let’s take a look at the following example:\n#!/usr/bin/perl use warnings; use strict; my $x = 10; my $s = \u0026#34;a string\u0026#34;; print(\u0026#34;complex list\u0026#34;, $x , $s ,\u0026#34;\\n\u0026#34;); 6.3. using qw function perl provides the qw() function that allows you to get a list by extracting words out of a string using the space as a delimiter. the qw stands for quote word. the two lists below are the same:\n#!/usr/bin/perl use warnings; use strict; print(\u0026#39;red\u0026#39;,\u0026#39;green\u0026#39;,\u0026#39;blue\u0026#39;); # redgreenblue print(\u0026#34;\\n\u0026#34;); print(qw(red green blue)); # redgreenblue print(\u0026#34;\\n\u0026#34;); similar to the q/ and q// operators, you can use any non-alphanumeric character as a delimiter. the following lists are the same:\nqw\\this is a list\\; qw{this is a list}; qw[this is a list]; 6.4. flattening list if you put a list, called an internal list, inside another list, perl automatically flattens the internal list. the following lists are the same:\n(2,3,4,(5,6)) (2,3,4,5,6) ((2,3,4),5,6) 6.5. accessing list element you can access elements of a list by using the zero-based index. to access the nth element, you put (n – 1) index inside square brackets.\nlet’s take a look at the following example: #!/usr/bin/perl use warnings; use strict; print( (1,2,3)[0] # 1 first element ); print \u0026#34;\\n\u0026#34;; # new line print( (1,2,3)[2] # 3 third element ); print \u0026#34;\\n\u0026#34;; # new line to get multiple elements of a list at a time, you can put a list inside square brackets. this feature is called list slice. you can omit the parenthesis of the list inside the square bracket.\n(1,2,3,4,5)[0,2,3] # (1,3,4) the above code returns a list of three elements (1, 3, 4).\n6.6. ranges perl allows you to build a list based on a range of numbers or characters e.g., a list of numbers from 1 to 100, a list of characters from a to z. the following example defines two lists:\n(1..100) (a..z) 7. array perl array and how to use arrays effectively in your program and techniques to manipulate array’s elements.\na list is immutable so you cannot change it directly. in order to change a list, you need to store it in an array variable.\nby definition, an array is a variable that provides dynamic storage for a list.\nin perl, the terms array and list are used interchangeably, but you have to note an important difference: a list is immutable whereas an array is mutable. in other words, you can modify the array’s elements, grow or shrink the array, but not a list.\na scalar variable begins with the dollar sign ($), however, an array variable begins with an at-sign (@).\nhow to declare an array variable #!/usr/bin/perl use warnings; use strict; my @days = qw(mon tue wed thu fri sat sun); print(\u0026#34;@days\u0026#34;, \u0026#34;\\n\u0026#34;); the $ sign looks like s in the word scalar. and @ looks like a in the word array, which is a simple trick to remember what type of variables you are working with.\n7.1. accessing perl array elements like a list, you can access array elements using square brackets [] and indices.\nexample #!/usr/bin/perl use warnings; use strict; my @days = qw(mon tue wed thu fri sat sun); print($days[0]); print(\u0026#34;\\n\u0026#34;); if you take a look at the code carefully, you will see that we used $days[0] instead of @days[0].\nthis is because an array element is a scalar, you have to use the scalar prefix ($). in perl, the rule is that the prefix represents what you want to get, not what you’ve got.\nperl also allows you to access array elements using negative indices. perl returns an element referred to by a negative index from the end of the array. for example, $days[-1] returns the last element of the array @days.\nyou can access multiple array elements at a time using the same technique as the list slice.\n#!/usr/bin/perl use warnings; use strict; my @days = qw(mon tue wed thu fri sat sun); my @weekend = @days[-2..-1]; # satsun print(“@weekend”); print(\u0026#34;\\n\u0026#34;); 7.2. counting perl array elements if you treat an array as a scalar, you will get the number of elements in the array.\nmy $count = @days; this code causes an error in case you don’t really want to count it but accidentally assign an array to a scalar. to be safe, use the scalar() function.\nmy @days = qw(mon tue wed thu fri sat sun); my $count = scalar @days; print($count, \u0026#34;\\n\u0026#34;); the operator $# returns the highest index of an array.\nmy @days = qw(mon tue wed thu fri sat sun); my $last = $#days; print($last, \u0026#34;\\n\u0026#34;); #\u0026#34; 6 7.3. modifying perl array elements to change the value of an element, you access the element using the index and assign it a new value. perl also allows you to change the values of multiple elements at a time.\nexample #!/usr/bin/perl use warnings; use strict; my @days = qw(mon tue wed thu fri sat sun); $days[0] = \u0026#39;monday\u0026#39;; @days[1..6] = qw(tuesday wednesday thursday friday saturday sunday); print(\u0026#34;@days\u0026#34;,\u0026#34;\\n\u0026#34;); 7.4. perl array operations perl provides several useful functions and operators to help you manipulate arrays effectively. we will cover the most important ones in the following sections.\nperl array as a stack with push() and pop() functions both functions treat an array as a stack. a stack works based on the last in first out (lifo) philosophy. it works exactly the same as a stack of books. the push() function appends one or more elements to the end of the array, while the pop() function removes the last element from the end of the array.\nhow to use push() and pop() functions #!/usr/bin/perl use warnings; use strict; my @stack = (); # empty array print(\u0026#34;push 1 to array\\n\u0026#34;); push(@stack,1); print(\u0026#34;push 2 to array\\n\u0026#34;); push(@stack,2); print(\u0026#34;push 3 to array\\n\u0026#34;); push(@stack,3); print(“@stack”, \u0026#34;\\n\u0026#34;); my $elem = pop(@stack); print(\u0026#34;element: $elem\\n\u0026#34;); $elem = pop(@stack); print(\u0026#34;element: $elem\\n\u0026#34;); $elem = pop(@stack); print(\u0026#34;element: $elem\\n\u0026#34;); perl array as a queue with unshift() and pop() functions if the push() and pop()` treat an array as a stack, the unshift() and pop() functions treat an array as a queue. a queue works based on the first in first out (fifo) philosophy. it works like a queue of visitors. the unshift() function adds one or more elements to the front of the array, while the pop() function removes the last element of the array.\nhow to use unshift() and pop() functions #!/usr/bin/perl use warnings; use strict; my @queue = (); # empty queue print(\u0026#34;enqueue 1 to array\\n\u0026#34;); unshift(@queue,1); print(\u0026#34;enqueue 2 to array\\n\u0026#34;); unshift(@queue,2); printf(\u0026#34;enqueue 3 to array\\n\u0026#34;); unshift(@queue,3); print(\u0026#34;@queue\u0026#34;, \u0026#34;\\n\u0026#34;); # 3 2 1 my $elem = pop(@queue); print(\u0026#34;element: $elem\\n\u0026#34;); $elem = pop(@queue); print(\u0026#34;element: $elem\\n\u0026#34;); $elem = pop(@queue); print(\u0026#34;element: $elem\\n\u0026#34;); sorting perl arrays perl provides the sort() function that allows you to sort an array in alphabetical or numerical order.\nsorting an array of strings alphabetically #!/usr/bin/perl use warnings; use strict; my @fruits = qw(oranges apples mango cucumber); my @sorted = sort @fruits; print(\u0026#34;@sorted\u0026#34;,\u0026#34;\\n\u0026#34;); # apples cucumber mango oranges the sort() function also accepts a block of code that allows you to change the sort algorithm. if you want to sort an array in numerical order, you need to change the default sorting algorithm.\n#!/usr/bin/perl use warnings; use strict; my @a = qw(3 2 1 4 7 6); print(\u0026#34;unsorted: \u0026#34;, \u0026#34;@a\u0026#34;, \u0026#34;\\n\u0026#34;); # unsorted: 3 2 1 4 7 6 @a = sort {$a \u0026lt;=\u0026gt; $b} @a; print(\u0026#34;sorted:\u0026#34;, \u0026#34;@a\u0026#34;, \u0026#34;\\n\u0026#34;); # sorted: 1 2 3 4 6 7 in the example above: first, we had an unsorted array @a, and we displayed the @a array to make sure that it is unsorted.\nsecond, we used the sort() function to sort the @a array. we passed a block of code {$a \u0026lt;⇒$b} and the @a array to the sort function. the $a and $b are global variables defined by the sort() function for sorting. the operator \u0026lt;⇒ is used to compare two numbers. the code block {$a \u0026lt;⇒ $b} returns -1 if $a \u0026lt; $b, 0 if $a = $b, and 1 if $a \u0026gt; $b.\nthird, we displayed the elements of the sorted array @a.\nfor more information on the sort() function, check out the perl sort function perl sort function.\n8. hash another compound data type called perl hash and how to manipulate hash elements effectively.\na perl hash is defined by key-value pairs. perl stores elements of a hash in such an optimal way that you can look up its values based on keys very fast.\nwith the array, you use indices to access its elements. however, you must use descriptive keys to access hash element. a hash is sometimes referred to as an associative array.\nlike a scalar or an array variable, a hash variable has its own prefix. a hash variable must begin with a percent sign (%). the prefix % looks like key/value pair so remember this trick to name the hash variables.\n%data = (\u0026#39;john paul\u0026#39;, 45, \u0026#39;lisa\u0026#39;, 30, \u0026#39;kumar\u0026#39;, 40); perl provides the ⇒ operator as an alternative to a comma (,). it helps differentiate between keys and values and makes the code more elegant.\nwhen you see the ⇒ operator, you know that you are dealing with a hash, not a list or an array.\nmy %countries = ( england =\u0026gt; \u0026#39;english\u0026#39;, france =\u0026gt; \u0026#39;french\u0026#39;, spain =\u0026gt; \u0026#39;spanish\u0026#39;, china =\u0026gt; \u0026#39;chinese\u0026#39;, germany =\u0026gt; \u0026#39;german\u0026#39;); perl requires the keys of a hash to be strings, meanwhile, the values can be any scalars. if you use non-string values as the keys, you may get an unexpected result.\nin addition, a hash key must be unique. if you try to add a new key-value pair with the key that already exists, the value of the existing key will be over-written.\nyou can omit the quotation in the keys of the hash.\n8.1. hash operations the most commonly used operation in the hash.\nlook up perl hash values use a hash key inside curly brackets {} to look up a hash value.\n#!/usr/bin/perl use warnings; use strict; # defines country =\u0026gt; language hash my %langs = ( england =\u0026gt; \u0026#39;english\u0026#39;, france =\u0026gt; \u0026#39;french\u0026#39;, spain =\u0026gt; \u0026#39;spanish\u0026#39;, china =\u0026gt; \u0026#39;chinese\u0026#39;, germany =\u0026gt; \u0026#39;german\u0026#39;); # get language of england my $lang = $langs{\u0026#39;england\u0026#39;}; # english print($lang,\u0026#34;\\n\u0026#34;); add new element $langs{\u0026#39;italy\u0026#39;} = \u0026#39;italian\u0026#39;; remove a single key/value pair delete $langs{\u0026#39;china\u0026#39;}; modify hash elements # add new key value pair $langs{\u0026#39;india\u0026#39;} = \u0026#39;many languages\u0026#39;; # modify official language of india $langs{\u0026#39;india\u0026#39;} = \u0026#39;hindi\u0026#39;; # loop over perl hash elements perl provides the keys() function that allows you to get a list of keys in scalars. you can use the keys() function in a for loop statement to iterate the hash elements:\n#!/usr/bin/perl use warnings; use strict; # defines country =\u0026gt; language hash my %langs = ( england =\u0026gt; \u0026#39;english\u0026#39;, france =\u0026gt; \u0026#39;french\u0026#39;, spain =\u0026gt; \u0026#39;spanish\u0026#39;, china =\u0026gt; \u0026#39;chinese\u0026#39;, germany =\u0026gt; \u0026#39;german\u0026#39;); for (keys %langs) { print(\u0026#34;official language of $_ is $langs{$_}\\n\u0026#34;); } the keys() function returns a list of hash keys. the for loop visits each key and assigns it to a special variable $. inside the loop, we access the value of a hash element via its key as $langs{$}.\n9. if statement perl if statement allows you to control the execution of your code based on conditions. the simplest form of the if statement is as follows:\nif (expression); in this form, you can put the if statement after another statement. let’s take a look at the following example:\nmy $a = 1; print(\u0026#34;welcome to perl if tutorial\\n\u0026#34;) if ($a == 1); the message is only displayed if the expression $a == 1 evaluates to true.\nhow perl defines true and false? both number 0 and string “0” are false.\nthe undefined value is false.\nthe empty list () is false.\nthe empty string \u0026#34;\u0026#34; is false.\neverything else is true.\nexecute multiple statements based on a condition if (expression) { statement; statement; ... } the curly braces {} are required even if you have a single statement to execute\nif..else statement perl provides the if else statement that allows you to execute a code block if the expression evaluates to true, otherwise, the code block inside the else branch will execute.\nif (expression) { // if code block; } else { // else code block; } example my $a = 1; my $b = 2; if ($a == $b) { print(\u0026#34;a and b are equal\\n\u0026#34;); } else { print(\u0026#34;a and b are not equal\\n\u0026#34;); } the code block in the else branch will execute because $a and $b are not equal.\nif..elsif statement in some cases, you want to test more than one condition:\nif $a and $b are equal, then do this.\nif $a is greater than $b then do that.\notherwise, do something else.\nperl provides the if elsif statement for checking multiple conditions and executing the corresponding code block:\nif (expression) { ... } elsif (expression2) { ... } elsif (expression3) { ... } else { ... } 10. a simple program we are going to apply what we have learned so far to create a simple program called currency converter.\nwe will use a hash to store the exchange rates.\nto get the inputs from users via the command line, we will use \u0026lt;stdin\u0026gt;. we use the chomp() function to remove the newline character (\\n) from the user’s inputs.\nwe convert the amount from local currency to foreign currency if the currencies are supported.\n#!/usr/bin/perl use warnings; use strict; my ($l_curr, $f_curr, $l_amount, $f_amount); my %rates = ( usd =\u0026gt; 1, ypy =\u0026gt; 82.25, eur =\u0026gt; 0.78, gbp =\u0026gt; 0.62, cny =\u0026gt; 6.23 ); # print supported currencies print(\u0026#34;supported currency:\\n\u0026#34;); for (keys %rates) { print(uc($_),\u0026#34;\\n\u0026#34;); } # get inputs from users: print(\u0026#34;enter local currency:\\n\u0026#34;); $l_curr = \u0026lt;stdin\u0026gt;; print(\u0026#34;enter foreign currency:\\n\u0026#34;); $f_curr = \u0026lt;stdin\u0026gt;; print(\u0026#34;enter amount:\\n\u0026#34;); $l_amount = \u0026lt;stdin\u0026gt;; chomp($l_curr,$f_curr,$l_amount); # check user\u0026#39;s inputs. if (not exists $rates{$l_curr}) { print(\u0026#34;local currency is not supported\\n\u0026#34;); } elsif (not exists $rates{$f_curr}) { print(\u0026#34;foreign currency is not supported\\n\u0026#34;); } else { # convert from local currency to foreign currency $f_amount = ($rates{$f_curr} / $rates{$l_curr}) * $l_amount; # print out the result print(\u0026#34;$l_amount $l_curr = $f_amount $f_curr\u0026#34;,\u0026#34;\\n\u0026#34;); } 11. unless statement before discussing the unless statement, let’s revisit perl’s philosophy:\nthere is more than one way to do it.\nperl always provides you with an alternative way to achieve what you need to do. in programming, you often hear something like this:\nif it’s not true, then do this (use if not statement).\nor unless it’s true, then do this (use unless statement).\nthe effect is the same but the philosophy is different. that’s why perl invented the unless statement to increase the readability of code when you use it properly.\nthe perl unless statement is equivalent to the if not statement\nunless statement statement unless (condition); perl executes the statement from right to left, if the condition is false, perl executes the statement that precedes the unless. if the condition is true, perl skips the statement.\nif you have more than one statement to execute, you can use the following form of the perl unless statement:\nunless (condition) { // code block } if the condition evaluates to false, perl executes the code block, otherwise, it skips the code block.\nmy $a = 10; unless($a \u0026lt;= 0){ print(\u0026#34;a is greater than 0\\n\u0026#34;) } unless..else statement sometimes you want to say unless the condition is true, then do this, otherwise do that.\nthis is where the unless…​else statement comes into play. see the following unless else statement:\nunless (condition) { // unless code block } else { // else code block } if the condition is false, perl will execute the unless code block, otherwise, perl will execute the else code block.\nmy $a = 10; unless ($a \u0026gt;= 0) { print(\u0026#34;a is less than 0\\n\u0026#34;); } else { print(\u0026#34;a is greater than or equal 0\\n\u0026#34;); } a is greater than or equal 0 unless..elsif..else statement if you have more than one condition for checking with the unless statement, you can use the unless elsif else statement as follows:\nunless (condition_1) { // unless code block } elsif (condition_2) { // elsif code block } else { // else code block } you can have many elsif clauses in the unless elsif statement.\nmy $a = 1; unless ($a \u0026gt; 0) { print(\u0026#34;a is less than 0\\n\u0026#34;); } elsif ($a == 0) { print(\u0026#34;a is 0\\n\u0026#34;); } else { print(\u0026#34;a is greater than 0\\n\u0026#34;); } unless statement guidelines you should use the unless statement with a simple condition to improve the code readability, especially when used as a postfix after another statement like the following example:\nmy $a = 1; print(\u0026#34;unless used with a very simple condition only.\\n\u0026#34;) unless($a \u0026lt; 0); you should avoid using the unless statement when the condition is complex and requires else and/or elsif clauses.\nif you take a look at the following code, it is difficult to interpret the meaning of the condition.\nmy $a = 1; my $b = 10; my $c = 20; unless ($a \u0026lt; 0 \u0026amp;\u0026amp; $b == 10 \u0026amp;\u0026amp; $c \u0026gt; 0) { print(\u0026#34;unless used with a very complex condition\\n\u0026#34;); } 12. given statement perl given statement, is similar to the switch case statement in other languages.\nthe given statement works like a series of if statements that allow you to match an expression or variable against different values, depending on the matched value, perl will execute statements in the corresponding when clause.\npragma for using given statement perl introduced the given statement since version 5.10. in order to use the perl given statement, you must use the following pragma:\nuse v5.10; or use the following pragma:\nuse feature \u0026#34;switch\u0026#34;; perl given syntax there are several new keywords introduced along with the given such as: when, break and continue.\ngiven (expr) { when (expr1) { statement; } when (expr1) { statement; } when (expr1) { statement; } ... } given statement in greater detail both given and when accept arguments in a scalar context.\nthe type of argument you pass to the given clause determines the kind of pattern matching that perl will use to perform matching. if the argument appears to be a boolean expression, perl evaluates it directly. otherwise, perl will use the smart match operator to evaluate the argument, something like $_ ~~ expr\nto break out a when block, you use the break statement. perl uses break statement implicitly for all when blocks so you don’t have to explicitly specify it.\nto fall through from one case to the next, you use the continue statement.\nfrom version 5.12 you can use when as a statement modifier.\nfrom version 5.14, the given statement returns the last evaluated expression if no condition is true or the last evaluated expression of the default clause. the given statement also returns an empty list when the break statement is encountered or no condition is matched.\ngiven statement examples the following program asks the user to input an rgb (red, green, blue) color and returns its color code:\nuse v5.10; # at least for perl 5.10 #use feature \u0026#34;switch\u0026#34;; use warnings; use strict; my $color; my $code; print(\u0026#34;please enter a rgb color to get its code:\\n\u0026#34;); $color = \u0026lt;stdin\u0026gt;; chomp($color); $color = uc($color); given($color){ when (\u0026#39;red\u0026#39;) { $code = \u0026#39;#ff0000\u0026#39;; } when (\u0026#39;green\u0026#39;) { $code = \u0026#39;#00ff00\u0026#39;; } when (\u0026#39;blue\u0026#39;) { $code = \u0026#39;#0000ff\u0026#39;; } default { $code = \u0026#39;\u0026#39;; } } if ($code ne \u0026#39;\u0026#39;) { print(\u0026#34;code of $color is $code \\n\u0026#34;); } else { print(\u0026#34;$color is not rgb color\\n\u0026#34;); } how program works first, we declared the pragma use v5.10; in order to use the given statement.\nsecond, we asked the user for a color, we removed the newline by using the chomp() function and made the input color upper case so that whatever format of color the user entered is accepted e.g., red, red or red is the red color.\nthird, we used the given statement to check. if no color is found, then we set the color code to blank in the default clause. based on the user’s input, we got the corresponding color code and display it.\nfrom perl version 5.12, you can use the when statement as a statement modifier like the following example:\ngiven ($color) { $code = \u0026#39;#ff0000\u0026#39; when \u0026#39;red\u0026#39;; $code = \u0026#39;#00ff00\u0026#39; when \u0026#39;green\u0026#39;; $code = \u0026#39;#0000ff\u0026#39; when \u0026#39;blue\u0026#39;; default { $code = \u0026#39;\u0026#39;; } } in addition, the given statement returns a value that is the result of the last expression.\nprint do { given ($color) { \u0026#34;#ff0000\\n\u0026#34; when \u0026#39;red\u0026#39;; \u0026#34;#00ff00\\n\u0026#34; when \u0026#39;green\u0026#39;; \u0026#34;#0000ff\\n\u0026#34; when \u0026#39;blue\u0026#39;; default { \u0026#39;\u0026#39;; } } } more complex example:\nuse v5.12; use strict; use warnings; print \u0026#39;enter something: \u0026#39;; chomp( my $input = \u0026lt;\u0026gt; ); print do { given ($input) { \u0026#34;the input has numbers\\n\u0026#34; when /\\d/; \u0026#34;the input has letters\\n\u0026#34; when /[a-za-z]/; default { \u0026#34;the input has neither number nor letter\\n\u0026#34;; } } } how the program works the program asks the user to enter anything that can be numbers, letters, or both.\nin the when clause, we used a very special expression that is known as a regular expression. the /\\d/ matches any string that contains only numbers, the /[a-za-z]/ expression matches the string that contains only letters. in this case, the given statement can do more advanced matches.\n13. for loop perl for loop statement to loop over elements of a list.\nfor and foreach statements the perl for loop statement allows you to loop over elements of a list. in each iteration, you can process each element of the list separately. this is why the for loop statement is sometimes referred to as foreach loop.\nin perl, the for and foreach loop are interchangeable, therefore, you can use the foreach keyword in where you use the for keyword.\nloop over elements of an array #!/usr/bin/perl use warnings; use strict; my @a = (1..9); for (@a) { print(\u0026#34;$_\u0026#34;,\u0026#34;\\n\u0026#34;); } how it works first, we defined an array of 9 integers @a\nsecond, we used for loop statement to loop over elements of the @a array.\nthird, inside the loop, we displayed element’s value using default variable $_\nif you replace the for keyword by the foreach keyword in the above example, it works the same.\n#!/usr/bin/perl use warnings; use strict; my @a = (1..9); foreach (@a) { print(\u0026#34;$_\u0026#34;,\u0026#34;\\n\u0026#34;); } for loop iterator if we don’t supply an explicit iterator to the loop, perl will use a special variable called default variable with the name $_ as the iterator. in each iteration, perl assigns each element of the array @a to the default variable $_.\nexplicit perl for loop iterator if you want to specify an explicit iterator for the loop, you can declare it in the for loop statement as follows:\n#!/usr/bin/perl use warnings; use strict; my @a = (1..9); for my $i (@a) { print(\u0026#34;$i\u0026#34;,\u0026#34;\\n\u0026#34;); } $i is the iterator of the for loop in this example. in each iteration, perl assigns the corresponding element of the array to the $i iterator. notice that the $i variable exists only during the execution of the loop.\nif you declare an iterator before entering the loop, perl will restore its original value after the loop is terminated. take a look at the following example:\n#!/usr/bin/perl use warnings; use strict; my @a = (1..9); my $i = 20; for $i (@a) { print(\u0026#34;$i\u0026#34;,\u0026#34;\\n\u0026#34;); } print(\u0026#39;iterator $i is \u0026#39;,\u0026#34;$i\u0026#34;,\u0026#34;\\n\u0026#34;); # 20 how it works first, we declared variable $i before the loop and initialized its value to 20.\nsecond, we used a variable $i as the iterator; its value changes in each iteration of the loop.\nthird, after the loop, we displayed the value of $i. perl restored its original value, which is 20.\nperl for loop iterator: value or alias in each iteration of the loop, perl creates an alias instead of a value. in other words, if you make any changes to the iterator, the changes also reflect in the elements of the array. see the following example:\n#!/usr/bin/perl use warnings; use strict; my @b = (1..5); print(\u0026#34;before the loop: @b \\n\u0026#34;); for (@b) { $_ = $_ * 2; } print(\u0026#34;after the loop: @b \\n\u0026#34;); how it works first, we declared an array @b with 5 elements from 1 to 5. we displayed the array @b elements using print function\nsecond, we iterated elements of the array. we multiplied each element with 2 through the iterator $_\nthird, outside of the loop, we displayed the elements of the array again\nc-style for loop perl also supports for loop in c-style. however, it is not a good practice to use the c-style for loop because to code will become less readable.\nfor (initialization; test; step) { // code block; } there are three control parts: initialization. perl executes the initialization once when the loop is entered. we often use initialization to initialize a loop counter variable.\ntest. perl evaluates the test expression at the beginning of each iteration and executes the code block inside the loop body as long as the test expression evaluates to false.\nstep. perl executes step at the end of each iteration. you often use the step to modify the loop counter.\nc-style for loop: #!/usr/bin/perl use warnings; use strict; my @c = (1..6); for (my $i = 0; $i \u0026lt;= $#c; $i++) { print(\u0026#34;$c[$i] \\n\u0026#34;); } it is much more readable if you perl’s for loop style\n#!/usr/bin/perl use warnings; use strict; my @c = (1..6); for (@c) { print(\u0026#34;$_ \\n\u0026#34;); } 14. while loop statement perl while loop statement executes a code block repeatedly as long as the test condition remains true. the test condition is checked at the beginning of each iteration.\nwhile (condition) { # code block } if the condition evaluates to true, the code block inside while loop executes.\nat the beginning of each iteration, the condition is reevaluated. the loop is terminated if the condition evaluates to false.\nat some point in the loop, you have to change some variables that make the condition false to stop the loop. otherwise, you will have an indefinite loop that makes your program execute until the stack overflow error occurs.\nthe while loop statement has an optional block: continue, which executes after each current iteration. in practice, the continue block is rarely used.\nif you want to execute a code block as long as the condition is false, you can use until statement.\nin case you want to check the condition at the end of each iteration, you use the do…​while or do…​until statement instead.\nto control the loop, you use the next and last statements.\nexample happy new year count down program\n#!/usr/bin/env perl use warnings; use strict; my $counter = 10; while ($counter \u0026gt; 0) { print(\u0026#34;$counter\\n\u0026#34;); $counter--; # count down sleep(1); # pause program for 1 second if ($counter == 0) { print(\u0026#34;happy new year!\\n\u0026#34;); } } let’s examine the code above in more detail first, declare a $counter variable and set its value to 10.\nnext, put a condition to make sure that the value of $counter is greater than zero before entering into the loop.\nthen, displayed the $counter and decreased its current value of one. we used the sleep() function to pause the program for a second in each iteration.\nafter that, use the if statement to check if $counter is zero to print the “happy new year” message. the code block inside the loop executes 10 times before the $counter is set to zero.\nfinally, after each iteration, the $counter decreases, and its value is set to zero at the 10th iteration. perl terminated the loop.\nwhile loop with diamond operator \u0026lt;\u0026gt; you often use the while loop statement with the diamond operator \u0026lt;\u0026gt; to get the user’s input from the command line:\n#!/usr/bin/perl use warnings; use strict; my $num; my @numbers = (); print \u0026#34;enter numbers, each per line :\\n\u0026#34;; print \u0026#34;ctrl-z (windows) or ctrl-d(linux) to exit\\n\u0026gt;\u0026#34;; while(my $input = \u0026lt;\u0026gt;) { print(\u0026#34;\u0026gt;\u0026#34;); chomp $input; $num = int($input); push(@numbers, $num); } print \u0026#34;you entered: @numbers\\n\u0026#34;; how it works first, assign the user’s input to the $input variable using the diamond operator (\u0026lt;\u0026gt;). because it doesn’t specify any filehandle for the diamond operator, perl checks the special array @argv, which is empty in this case, hence instructs the diamond operator to read from stdin i.e., from the keyboard.\nsecond, remove the newline character from the $input variable using the chomp() function and convert $input to an integer.\nthird, add the integer into the @number array.\nwhile loop statement modifier let’s take a look at the following example:\n#!/usr/bin/perl use warnings; use strict; my $i = 5; print($i--,\u0026#34;\\n\u0026#34;) while ($i \u0026gt; 0); the while loop statement is placed after another statement.\nperl evaluates the statements from right to left.\nit means that perl evaluates the condition in the while statement at the beginning of each iteration.\nyou use the while loop statement modifier only if you have one statement to execute repeatedly based on a condition like the above example.\n","title":"Perl"},{"date":"2024-07-14","image":"","imageAlt":"","link":"https://hossein-lap.github.io/docs/vim/","summary":"Vim the text editor.\n","tags":["config","Vim","vim-motions","vimscript"],"text":" 1. simulating vim on the page ctrl-s is a common convention for representing chordal commands. it means \u0026#34;press the control key and the s key at the same time.\u0026#34; but this convention isn’t well suited to describing vim’s modal command set.\n1.1. playing melodies in normal mode, we compose commands by typing one or more keystrokes in sequence. there commands appear as follows:\nnotation meaning x\npress x once\ndw\nin sequence, pres d, then w\ndap\nin sequence, pres d, a, then p\nmost of these sequences involve two or three keystrokes, but some are longer. deciphering the meaning of vim’s normal mode command sequences can be challenging, but you’ll get better at it with practice.\n1.2. playing chords when you see a keystroke such as \u0026lt;c-p\u0026gt;, it doesn’t mean \u0026#34;press \u0026lt;, then c, then -, and so on.\u0026#34; the \u0026lt;c-p\u0026gt; notation is equivalent to ctrl-p, which means \u0026#34;press the ctrl and p keys at the same time\u0026#34; some of vim’s commands are formed by combining chords and keystrokes in sequence, and this notation handles them well. consider these examples:\nnotation meaning \u0026lt;c-n\u0026gt;\npress \u0026lt;ctrl\u0026gt; and n at the same time\ng\u0026lt;c-]\u0026gt;\npress g, followed by \u0026lt;ctrl\u0026gt; and ] at the same time\n\u0026lt;c-r\u0026gt;0\npress \u0026lt;ctrl\u0026gt; and r at the same tile, then 0\n\u0026lt;c-w\u0026gt;\u0026lt;c-=\u0026gt;\npress \u0026lt;ctrl\u0026gt; and w at the same time, then \u0026lt;ctrl\u0026gt; and = at the same time\n1.3. placeholders some commands must be followed by a particular kind of keystroke, while other command can be followed by any key on the keyboard. i use curly braces to denote the set of valid keystrokes that can follow a command.\nhere are some examples:\nnotation meaning f{char}\npress f, followed by any other character\n`{a-z}\npress `, followed by any lowercase letter\nm{a-za-z}\npress m, followed by any lowercase or upper case letter\nd{motion}\npress d, followed by any motion command\n\u0026lt;c-r\u0026gt;{register}\npress \u0026lt;ctrl\u0026gt; and r at the same time, followed by the address of a register\n1.4. showing special keys some keys are called by name. this table shows a selection of them:\nnotation meaning \u0026lt;esc\u0026gt;\npress the escape key\n\u0026lt;cr\u0026gt;\npress the carriage return key (aka \u0026lt;enter\u0026gt;)\n\u0026lt;ctrl\u0026gt;\npress the control key\n\u0026lt;tab\u0026gt;\npress the tab key\n\u0026lt;shift\u0026gt;\npress the shift key\n\u0026lt;s-tab\u0026gt;\npress the \u0026lt;shift\u0026gt; and \u0026lt;tab\u0026gt; key at the same time\n\u0026lt;up\u0026gt;\npress the up-arrow key\n\u0026lt;down\u0026gt;\npress the down-arrow key\npress the space bar\nnote that the space bar is represented as . this could be combined with the f{char} command to form f .\n","title":"Vim"},{"date":"2024-07-06","image":"","imageAlt":"","link":"https://hossein-lap.github.io/notes/grafana/","summary":"description\n","tags":["Grafana","Infrastructure","Logging","Monitoring","Telemetry"],"text":" this is some note, nothing serious. do not cite from this article.\n1. grafana stack grafana offers many tools, which we’ve grouped into the following categories:\nthe core grafana stack: lgtm and the grafana agent\ngrafana enterprise plugins\nincident response tools\nother grafana tools\n1.1. the core grafana stack the core grafana stack consists of mimir, loki, tempo, and grafana; the acronym lgtm is often used to refer to this tech stack.\nmimir mimir is a time series database (tsdb) for the storage of metric data. it uses low-cost object storage such as s3, gcs, or azure blob storage. mimir is a fully prometheus-compatible solution that addresses the common scalability problems encountered with storing and searching huge quantities of metric data.\nan active time series is a metric with a value and unique labels that has reported a sample in the last 20 minutes.\nloki loki is a set of components that offer a full feature logging stack. loki uses lower-cost object storage such as s3 or gcs, and only indexes label metadata.\nlog aggregation tools typically use two data structures to store log data. an index that contains references to the location of the raw data paired with searchable metadata, and the raw data itself stored in a compressed form.\nloki differs from a lot of other log aggregation tools by keeping the index data relatively small and scaling the search functionality by using horizontal scaling of the querying component.\ntempo tempo is a storage backend for high-scale distributed trace telemetry, with the aim of sampling 100% of the read path. like loki and mimir, it leverages lower-cost object storage such as s3, gcs, or azure blob storage.\ntempo also offers the ability to generate metrics from spans as they are ingested; these metrics can be written to any backend that supports prometheus remote write.\ngrafana grafana has been a staple for fantastic visualization of data since 2014. it has targeted the ability to connect to a huge variety of data sources from tsdbs to relational databases and even other observability tools. grafana has over 150 data source plugins available. grafana has a huge community using it for many different purposes. this community supports over 6,000 dashboards, which means there is a starting place for most available technologies with minimal time to value.\ngrafana agent grafana agent is a collection of tools for collecting logs, metrics, and traces. there are many other collection tools that grafana integrates well with.\n1.2. grafana enterprise plugins these are part of any paid subscription to grafana.\nthe enterprise data source plugins allow organizations to read data from many other storage tools they may use, from software development tools such as gitlab and azure devops to business intelligence tools such as snowflake, databricks, and looker. grafana also offers tools to read data from many other observability tools, which enables organizations to build comprehensive operational coverage while offering individual teams a choice of the tools they use.\n1.3. grafana incident response and management grafana offers three products in the incident response and management (irm) space:\nat the foundation of irm are alerting rules, which can notify via messaging apps, email, or grafana oncall\ngrafana oncall offers an on-call schedule management system that centralizes alert grouping and escalation routing\ngrafana incident offers a chatbot functionality that can set up necessary incident spaces, collect timelines for a post-incident review process, and even manage the incident directly from a messaging service\n1.4. other grafana tools grafana labs continues to be a leader in observability and has acquired several companies in this space to release new products that complement the tools we’ve already discussed.\nfaro grafana faro is a javascript agent that can be added to frontend web applications. the project allows for real user monitoring (rum) by collecting telemetry from a browser.\nby adding rum into an environment where backend applications and infrastructure are instrumented, observers gain the ability to traverse data from the full application stack.\nk6 k6 is a load testing tool that provides both a packaged tool to run in your own infrastructure and a cloud software as a service (saas) offering. load testing, especially as part of a ci/cd pipeline, really enables teams to see how their application will perform under load, and evaluate optimizations and refactoring. paired with other detailed analysis tools such as pyroscope, the level of visibility and accessibility to non-technical members of the team can be astounding.\npyroscope pyroscope is a tool that enable teams to engage in the continuous profiling of system resource use by applications (cpu, memory, etc.). pyroscope advertises that with a minimal overhead of ~2-5% of performance, they can collect samples as frequently as every 10 seconds. phlare is a grafana labs project started in 2022, and the two projects have now merged.\n2. common log formats logs support performance and capacity monitoring in infrastructure, bug detection in software, root cause analysis, user behavior tracking, and more. following certain guidelines will help your future self when you need to analyze logs.\nlog formats usually identify if they are structured or unstructured, the data types used in them, and if any encoding or delimitation is being used.\n2.1. structured, semi-structured, and unstructured logging it does not matter what your logs look like and they can come in structured, semi-structured, or unstructured formats.\nwhen designing and building observability solutions, it’s important to understand the log formats you are working with. this ensures that you can ingest, parse, and store the data in a way that it can be used effectively.\nif you familiarized yourself with the personas, you have an awareness of who they will be used by and for what purpose.\n2.1.1. structured logging structured logs have a predetermined message format that allows them to be treated as datasets rather than text. the idea of structured logging is to present data with a defined pattern that can be easily understood by humans and efficiently processed by machines. the log entries are often delimited with characters such as a comma, space, or hyphen. data fields may also be joined using an equals sign or colon for key-value pairs, such as name=diego or city=berlin.\na structured log format { \u0026#34;timestamp\u0026#34;: \u0026#34;2023-04-25t12:15:03.006z\u0026#34;, \u0026#34;message\u0026#34;: \u0026#34;user diego.developer has logged in\u0026#34;, \u0026#34;log\u0026#34;: { \u0026#34;level\u0026#34;: \u0026#34;info\u0026#34;, \u0026#34;file\u0026#34;: \u0026#34;auth.py\u0026#34;, \u0026#34;line\u0026#34;: 77 }, \u0026#34;user\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;diego.developer\u0026#34;, \u0026#34;id\u0026#34;: 123 }, \u0026#34;event\u0026#34;: { \u0026#34;success\u0026#34;: true } } an additional benefit of structured logging is that you can validate the conformation of the data to a schema with tools such as json schema. this opens up the possibility of making version control changes to the schema, which is where logs and event bus technology overlap.\n2.1.2. semi-structured logging semi-structured logs aim to bridge the gap between unstructured and structured and, as a result, can be quite complicated. they are designed to be easy for humans to read but also have a schema that makes it possible for machines to process them too. they have complex field and event separators and usually come with a defined pattern to aid with ingesting and parsing. parsing is usually done using regular expressions or other code.\n2.1.3. unstructured logging unstructured logging typically refers to log entries that are presented in a textual format that can easily be read by humans but is difficult for machines to process. they are often color-coded with blank spaces to improve presentation and readability.\nparsing and splitting the data correctly creates a disassociation between events and their identifying metadata. an unstructured log will require some custom parsing, requiring intimate knowledge of the data and often creating additional work for the engineer when ingesting data. this also creates technical liability; the dependency on the log remaining the same restricts developers from changing logs or runs the risk of parsing and reporting on unstructured logs prone to breaking.\nto aid the ability of machines to process unstructured logs, encapsulation prevents entries such as stack traces from splitting at an inappropriate location.\nthe following is an example of a multiline log, with a naive encapsulation that looks for line breaks; this will appear in logging systems as four distinct events:\n2023-04-25 12:15:03,006 info [svr042] usermembershipsiterable found 4 children for 4 groups in 3 ms begin transaction update record. process started. process completed. with encapsulation based on the timestamp at the start of the event, this will be stored correctly for searching.\n2.2. sample log formats many log formats have been used in computer systems. all of these formats have a common goal of presenting a standard structure or set of fields for recording important information about the activity of a computer system.\n2.2.1. common event format (cef) developed by arcsight to fulfill the security information and event management (siem) use case, the cef is a structured text-based log format. using utf-8 encoding, the format contains a prefix, a cef header, and a body containing additional enrichment data.\nlog section description prefix\nit combines the event timestamp and source hostname\ncef header\nit combines the following pieces of metadata:\nsoftware version\nvendor name\nproduct name\nproduct version\nevent name\nproduct event class identification code\nevent severity\nbody\nit contains a list of key-value pairs\nexample cef:0|security provider|security product|version|123|user authenticated|3|src=10.51.113.149 suser=diego target=diego msg=user authenticated from 1001:db7::5 2.2.2. ncsa common log format (clf) as one of the oldest log formats used by web servers, the ncsa clf has for a long time been the most common and well-known log formats. it has a fixed format text-based structure and therefore cannot be customized at all.\nhere is the ncsa clf field list: remote host address\nremote log name\nusername\ntimestamp\nrequest and protocol version\nhttp status code\nbytes sento\nwhere data is missing from the log, a hyphen acts as a placeholder. unsupported characters are replaced with the + symbol.\nhere is an example ncsa clf log: 127.0.0.1 user-identifier diego [25/apr/2023:12:15:03 -0000] \u0026#34;get / apache_pb.gif http/1.1\u0026#34; 200 2326 2.2.3. w3c extended log file format the microsoft internet information server log format known as w3c is a structured yet configurable format. full control over the included fields ensures log files contain the most relevant data. identification of the information or direction of flow is denoted using a string prefix: server (s), client ©, server to client (sc), and client to server (cs).\nhere is the w3c extended log file format field list: timestamp\nclient ip\nserver ip\nuri-stem\nhttp status code\nbytes sent\nbytes received\ntime taken\nversion\nhere is an example w3c log: #software: internet information services 10.0 #version: 1.0 #date: 2023-04-25 12:15:03 #fields: time c-ip cs-method cs-uri-stem sc-status cs-version 12:15:03 10.51.113.149 get /home.htm 200 http/1.0 2.2.4. windows event log the microsoft windows operating system comes with a built-in complex structured logging system that captures data related to specific events on the operating system. there are four common windows event log categories - system, application, security, and setup - and an additional special category for forwarded events.\neach event log is also one of five different types: information, warning, error, success audit, and failure audit. windows event log is one of the most verbose log formats in use. it usually includes details such as timestamp, event id, username, hostname, message, and category, making it invaluable in diagnosing problems. windows event ids are documented and searchable, so you can easily get detailed information regarding the log event; they are grouped into categories, narrowing down the area where the event occurred, which makes debugging very accurate.\nhere is a trimmed example of microsoft windows event log: an account was successfully logged on. subject: security id: system account name: desktop-tmc369$ account domain: workgroup logon id: 0xe37 logon information: new logon: security id: ad\\diegodeveloper account name: diego.developer@themelt.cafe account domain: ad logon id: 0xec4093f network information: workstation name: desktop-tmc369 2.2.5. javascript object notation (json) as one of the newer yet most commonly used log formats today, json is a structured format constructed from multiple key-value pairs. using json, data can be nested into different layers while keeping the format easy to read. additionally, different data types can be represented, such as string, number, boolean, null, object, and array.\nhere is an example json log file: { \u0026#34;timestamp\u0026#34;: \u0026#34;2023-04-25t12:15:03.006z\u0026#34;, \u0026#34;message\u0026#34;: \u0026#34;user diego.developer has logged in\u0026#34;, \u0026#34;log\u0026#34;: { \u0026#34;level\u0026#34;: \u0026#34;info\u0026#34;, \u0026#34;file\u0026#34;: \u0026#34;auth.py\u0026#34;, \u0026#34;line\u0026#34;: 77 }, \u0026#34;user\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;diego.developer\u0026#34;, \u0026#34;id\u0026#34;: 123 }, \u0026#34;event\u0026#34;: { \u0026#34;success\u0026#34;: true } } 2.2.6. syslog the go-to log format for many years and still widely used, syslog is a defined standard for creating and transmitting logs. the syslog transport protocol specifies how log transmission takes place, as well as the data format. the default network ports for the protocol are 514 and 6514, with the latter being used for encryption.\nthe syslog message format combines a standardized header and message holding the body of the log.\nhere is an example syslog log: apr 25 12:15:03 server1 sshd[41458] : failed password for diego from 10.51.113.149 port 22 ssh2 2.2.7. logfmt logfmt is a widely used log format that fits as human readable and structured so that computers and people can both read it. a logfmt-formatted log line consists of any number of key-value pairs that can be easily parsed. as there are no standards, it is easy to extend and perfect for developers to simply add more key-value pairs to the output.\nhere is an example logfmt log: level=info method=get path=/ host=myserver.me fwd=\u0026#34;10.51.113.149\u0026#34; service=4ms status=200 3. exploring metric types and best practices metrics, along with logs, are an essential tool for software developers and operators, providing them with indicators regarding the state of applications and systems. resource usage data is great for monitoring a metric that captures numerical data over time. there are many different types of resources but some good examples would be cpu or ram usage, the number of messages in a queue, and the number of received http requests. metrics are frequently generated and easily enriched with labels, attributes, or dimensions, making them efficient to search and ideal in determining if something is wrong, or different from usual.\na metric commonly has the following fields: name: this uniquely identifies the metric\ndata point value(s): the data that’s stored varies by metric type\ndimensions: additional enrichment labels or attributes that support analysis\n3.1. wip ","title":"Grafana"},{"date":"2024-05-31","image":"","imageAlt":"","link":"https://hossein-lap.github.io/notes/k8s-ingress-loadbalancer/","summary":"Configure kubernetes infrastructure with NodePort, ClusterIP, Ingress, nginx load-balancer\n","tags":["Infrastructure","Ingress","K8S","LoadBalancer","NodePort"],"text":" this is some note, nothing serious. do not cite from this article.\ndownload this note as a pdf\n1. forwarding a local network port to a port in the pod when you want to talk to a specific pod without going through a service (for debugging or other reasons), kubernetes allows you to configure port forwarding to the pod.\nthis is done through the kubectl port-forward command. the following command will forward your machine’s local port 8888 to port 8080 of your e.g kubia-manual pod.\nexample: $ kubectl port-forward kubia-manual 8888:8080 output: ... forwarding from 127.0.0.1:8888 -\u0026gt; 8080 ... forwarding from [::1]:8888 -\u0026gt; 8080 1.1. connecting to the pod through the port forwarder in a different terminal, you can now use curl to send an http request to your pod through the kubectl port-forward proxy running on localhost:8888.\nexample: $ curl localhost:8888 output: you\u0026#39;ve hit kubia-manual 2. service object each pod gets its own ip address, but this address is internal to the cluster and isn’t accessible from outside of it. to make the pod accessible from the outside, you’ll expose it through a service object. you’ll create a special service of type loadbalancer, because if you create a regular service (a clusterip service), like the pod, it would also only be accessible from inside the cluster. by creating a loadbalancer type service, an external load balancer will be created and you can connect to the pod through the load balancer’s public ip.\n2.1. creating a service object to create the service, you’ll tell kubernetes to expose the replicationcontroller you created:\nusing yaml file manifest: apiversion: v1 kind: service metadata: name: kubia spec: ports: - port: 80 # service\u0026#39;s port targetport: 8080 # the forward-to port by service selector: # all pods labeled `kubia` will follow/select this service app: kubia apply the service: $ kubectl create -f kubia-srv.yaml using kubectl cli options template: $ kubectl expose rc \u0026lt;rep-controller-name\u0026gt; --type=loadbalancer --name \u0026lt;lb-name\u0026gt; expose: $ kubectl expose rc kubia --type=loadbalancer --name kubia-http output: service \u0026#34;kubia-http\u0026#34; exposed remotely executing commands in running containers: you’ll also need to obtain the cluster ip of your service (using kubectl get svc, for example)\n$ kubectl exec kubia-7nog1 -- curl -s http://10.111.249.153 output: you\u0026#39;ve hit kubia-gzwli 2.2. session affinity on the service if you execute the same command a few more times, you should hit a different pod with every invocation, because the service proxy normally forwards each connection to a randomly selected backing pod, even if the connections are coming from the same client.\nif, on the other hand, you want all requests made by a certain client to be redirected to the same pod every time, you can set the service’s sessionaffinity property to clientip (instead of none, which is the default), as shown in the following listing.\nservice with clientip session affinity manifest apiversion: v1 kind: service spec: sessionaffinity: clientip ... kubernetes supports only two types of service session affinity: none and clientip.\nkubernetes services don’t operate at the http level. services deal with tcp and udp packets and don’t care about the payload they carry. because cookies are a construct of the http protocol, services don’t know about them, which explains why session affinity cannot be based on cookies.\n2.3. exposing multiple ports in the same service manifest apiversion: v1 kind: service metadata: name: kubia spec: ports: - name: http port: 80 targetport: 8080 - name: https port: 443 targetport: 8443 selector: app: kubia 2.4. using named ports you can give a name to each pod’s port and refer to it by name in the service spec.\nspecifying port names in a pod definition manifest: kind: pod spec: containers: - name: kubia ports: - name: http containerport: 8080 - name: https containerport: 8443 referring to named ports in a service manifest: apiversion: v1 kind: service spec: ports: - name: http port: 80 targetport: http - name: https port: 443 targetport: https 3. connecting to services living outside the cluster instead of having the service redirect connections to pods in the cluster, you want it to redirect to external ip(s) and port(s).\nthis allows you to take advantage of both service load balancing and service discovery. client pods running in the cluster can connect to the external service like they connect to internal services.\n3.1. service endpoints services don’t link to pods directly. instead, a resource sits in between—the endpoints resource. you may have already noticed endpoints if you used the kubectl describe command on your service.\nfull details of a service: $ kubectl describe svc kubia output: name: kubia namespace: default labels: \u0026lt;none\u0026gt; selector: app=kubia type: clusterip ip: 10.111.249.153 port: \u0026lt;unset\u0026gt; 80/tcp endpoints: 10.108.1.4:8080,10.108.2.5:8080,10.108.2.6:8080 session affinity: none no events. an endpoints resource (yes, plural) is a list of ip addresses and ports exposing a service. the endpoints resource is like any other kubernetes resource, so you can display its basic info with kubectl get.\n$ kubectl get endpoints kubia output: name endpoints age kubia 10.108.1.4:8080,10.108.2.5:8080,10.108.2.6:8080 1h manually configuring service endpoints having the service’s endpoints decoupled from the service allows them to be configured and updated manually.\nif you create a service without a pod selector, kubernetes won’t even create the endpoints resource\nafter all, without a selector, it can’t know which pods to include in the service\nto create a service with manually managed endpoints, you need to create both a service and an endpoints resource\na service without a pod selector: external-service.yaml apiversion: v1 kind: service metadata: name: external-service # must match the endpoints name spec: ports: - port: 80 endpoints are a separate resource and not an attribute of a service\nbecause you created the service without a selector, the corresponding endpoints resource hasn’t been created automatically\na manually created endpoints resource: external-service-endpoints.yaml apiversion: v1 kind: endpoints metadata: name: external-service # must match the service name subsets: - addresses: - ip: 11.11.11.11 - ip: 22.22.22.22 ports: - port: 80 # target port of endpoints 4. exposing services to external clients few ways to make a service accessible externally.\nnodeport service type\neach cluster node opens a port on the node itself (hence the name) and redirects traffic received on that port to the underlying service.\nthe service isn’t accessible only at the internal cluster ip and port, but also through a dedicated port on all nodes.\nloadbalancer service type, an extention of nodeport type\nthis makes the service accessible through a dedicated load balancer, provisioned from the cloud infrastructure kubernetes is running on.\nthe load balancer redirects traffic to the node port across all the nodes. clients connect to the service through the load balancer’s ip.\ncreate ingress resource, radically different mechanism for exposing multiple services through a single ip address\nit operates at the http level (network layer 7) and can thus offer more features than layer 4 services can\n4.1. using a nodeport service by creating a nodeport service, you make kubernetes reserve a port on all its nodes (the same port number is used across all of them) and forward incoming connections to the pods that are part of the service.\nthis is similar to a regular service (their actual type is clusterip), but a nodeport service can be accessed not only through the service’s internal cluster ip, but also through any node’s ip and the reserved node port.\nthis will make more sense when you try interacting with a nodeport service.\na nodeport service definition: kubia-svc-nodeport.yaml apiversion: v1 kind: service metadata: name: kubia-nodeport spec: type: nodeport # service type ports: - port: 80 # service\u0026#39;s internal cluster ip port targetport: 8080 # target port of the backing pods nodeport: 30123 # service will listen on port 30123, each cluster nodes selector: app: kubia examine the nodeport service: $ kubectl get svc kubia-nodeport output: name cluster-ip external-ip port(s) age kubia-nodeport 10.111.254.223 \u0026lt;nodes\u0026gt; 80:30123/tcp 2m external-ip column shows \u0026lt;nodes\u0026gt;, indicating the service is accessible through the ip address of any cluster node. the port(s) column shows both the internal port of the cluster ip (80) and the node port (30123). the service is accessible at the following addresses:\n10.11.254.223:80\n\u0026lt;1st node’s ip\u0026gt;:30123\n\u0026lt;2nd node’s ip\u0026gt;:30123\nand so on\nusing jsonpath to get the ips of all your nodes you can find the ip in the json or yaml descriptors of the nodes. but instead of sifting through the relatively large json, you can tell kubectl to print out only the node ip instead of the whole service definition\n$ kubectl get nodes -o \\ jsonpath=\u0026#39;{.items[*].status.addresses[?(@.type==\u0026#34;externalip\u0026#34;)].address}\u0026#39; output: 130.211.97.55 130.211.99.206 once you know the ips of your nodes, you can try accessing your service through them.\n$ curl http://130.211.97.55:30123 output: you\u0026#39;ve hit kubia-ym8or $ curl http://130.211.99.206:30123 output: you\u0026#39;ve hit kubia-xueq1 4.2. exposing a service through an external load balancer kubernetes clusters running on cloud providers usually support the automatic provision of a load balancer from the cloud infrastructure. all you need to do is set the service’s type to loadbalancer instead of nodeport. the load balancer will have its own unique, publicly accessible ip address and will redirect all connections to your service. you can thus access your service through the load balancer’s ip address.\nif kubernetes is running in an environment that doesn’t support loadbalancer services, the load balancer will not be provisioned, but the service will still behave like a nodeport service. that’s because a loadbalancer service is an extension of a nodeport service. you’ll run this example on google kubernetes engine, which supports loadbalancer services. minikube doesn’t, at least not as of this writing.\ncreating a loadbalancer service a loadbalancer-type service: kubia-svc-loadbalancer.yaml apiversion: v1 kind: service metadata: name: kubia-loadbalancer spec: type: loadbalancer ports: - port: 80 targetport: 8080 selector: app: kubia the service type is set to loadbalancer instead of nodeport. you’re not specifying a specific node port, although you could (you’re letting kubernetes choose one instead).\nconnecting to the service through the load balancer $ kubectl get svc kubia-loadbalancer output name cluster-ip external-ip port(s) age kubia-loadbalancer 10.111.241.153 130.211.53.173 80:32143/tcp 1m session affinity and web browsers because your service is now exposed externally, you may try accessing it with your web browser. you’ll see something that may strike you as odd—the browser will hit the exact same pod every time. did the service’s session affinity change in the meantime? with kubectl explain, you can double-check that the service’s session affinity is still set to none, so why don’t different browser requests hit different pods, as is the case when using curl?\nlet me explain what’s happening. the browser is using keep-alive connections and sends all its requests through a single connection, whereas curl opens a new connection every time. services work at the connection level, so when a connection to a service is first opened, a random pod is selected and then all network packets belonging to that connection are all sent to that single pod. even if session affinity is set to none, users will always hit the same pod (until the connection is closed).\n4.3. understanding the peculiarities of external connections you must be aware of several things related to externally originating connections to services.\nunderstanding and preventing unnecessary network hops when an external client connects to a service through the node port (this also includes cases when it goes through the load balancer first), the randomly chosen pod may or may not be running on the same node that received the connection. an additional network hop is required to reach the pod, but this may not always be desirable.\nyou can prevent this additional hop by configuring the service to redirect external traffic only to pods running on the node that received the connection. this is done by setting the externaltrafficpolicy field in the service’s spec section\nspec: externaltrafficpolicy: local ... being aware of the non-preservation of the client’s ip usually, when clients inside the cluster connect to a service, the pods backing the service can obtain the client’s ip address. but when the connection is received through a node port, the packets\u0026#39; source ip is changed, because source network address translation (snat) is performed on the packets.\nthe backing pod can’t see the actual client’s ip, which may be a problem for some applications that need to know the client’s ip. in the case of a web server, for example, this means the access log won’t show the browser’s ip.\nthe local external traffic policy described in the previous section affects the preservation of the client’s ip, because there’s no additional hop between the node receiving the connection and the node hosting the target pod (snat isn’t performed).\n5. exposing services externally through an ingress resource you must be aware of several things related to externally originating connections to services.\nunderstanding why ingresses are needed each loadbalancer service requires its own load balancer with its own public ip address, whereas an ingress only requires one, even when providing access to dozens of services\nwhen a client sends an http request to the ingress, the host and path in the request determine which service the request is forwarded to\ningresses operate at the application layer of the network stack (http) and can provide features such as cookie-based session affinity and the like, which services can’t\nunderstanding that an ingress controller is required to make ingress resources work, an ingress controller needs to be running in the cluster.\n5.1. creating an ingress resource an ingress resource definition: kubia-ingress.yaml apiversion: extensions/v1beta1 kind: ingress metadata: name: kubia spec: rules: - host: kubia.example.com # maps the domain name to your service http: paths: - path: / # all requests will be sent to port 80 backend: # of the kubia-nodeport service. servicename: kubia-nodeport # serviceport: 80 # this defines an ingress with a single rule, which makes sure all http requests received by the ingress controller, in which the host kubia.example.com is requested, will be sent to the kubia-nodeport service on port 80.\ningress controllers on cloud providers (in gke, for example) require the ingress to point to a nodeport service. but that’s not a requirement of kubernetes itself. 5.2. accessing the service through the ingress to access your service through http://kubia.example.com, you’ll need to make sure the domain name resolves to the ip of the ingress controller\nobtaining the ip address of the ingress: $ kubectl get ingresses output: name hosts address ports age kubia kubia.example.com 192.168.99.100 80 29m when running on cloud providers, the address may take time to appear, because the ingress controller provisions a load balancer behind the scenes.\nthe ip is shown in the address column.\nonce you know the ip, you can then either configure your dns servers to resolve kubia.example.com to that ip or you can setup hosts: add the following line to /etc/hosts (or c:\\windows\\system32\\drivers\\etc\\hosts on windows):\n/etc/hosts 192.168.99.100\tkubia.example.com so you can access the service at http://kubia.example.com using a browser or curl\n5.2.1. understading how ingress work the client first performed a dns lookup of kubia.example.com, and the dns server (or the local operating system) returned the ip of the ingress controller\nthe client then sent an http request to the ingress controller and specified kubia.example.com in the host header\nfrom that header, the controller determined which service the client is trying to access, looked up the pod ips through the endpoints object associated with the service, and forwarded the client’s request to one of the pods.\nthe ingress controller don’t forward the request to the service\nit only use it to select a pod\nmost, if not all, controllers work like this\n5.3. exposing multiple services through the same ingress both rules and paths are arrays, so they can contain multiple items\n5.3.1. mapping different services to different paths of the same host ","title":"Accessing K8S pods"},{"date":"2024-05-31","image":"","imageAlt":"","link":"https://hossein-lap.github.io/notes/webserver/","summary":"Create a web-server using just golang's stdlib \"net/http\"\n","tags":["Go","HTTP","JSON","Redis","SQL"],"text":" this is some note, nothing serious. do not cite from this article.\nwe need \u0026#34;net/http\u0026#34; module to create webserver and listen to the specified port.\nimport ( \u0026#34;net/http\u0026#34; ) we also might need these modules as well:\n\u0026#34;encoding/json\u0026#34; too for parsing json data\n\u0026#34;database/sql\u0026#34; and \u0026#34;github.com/go-sql-driver/mysql\u0026#34; to handle (my)sql/mariadb part\n\u0026#34;github.com/redi/go-redis/v9\u0026#34; to handle redis-cache\nwe need a request handler struct for the http server to be able to work.\ntype requesthandler struct {} and now we define the http server. it needs a servehttp() function and paths that needs to be handled (http requests goes to the specified paths)\nmain funcion func main() { mux := http.newservemx() mux.handle(\u0026#34;/path1\u0026#34;, \u0026amp;requesthandler{}) mux.handle(\u0026#34;/path1/\u0026#34;, \u0026amp;requesthandler{}) mux.handle(\u0026#34;/path2\u0026#34;, \u0026amp;requesthandler{}) mux.handle(\u0026#34;/path2/\u0026#34;, \u0026amp;requesthandler{}) /* continue */ http.listenandserve(\u0026#34;:8080\u0026#34;, mux) } serve function func (h *requesthandler) servehttp(w http.responsewriter, r *http.requset) { request_type := r.method tmp := strings.splitn(r.url.string(), \u0026#34;/\u0026#34;, 3) section := tmp[1] // path key := tmp[2] // add data after the path params := r.url.query() value := params.get(key) body, err := io.readall(r.body) // values from curl\u0026#39;s `--data` flag (spected to be json) /* continue */ } 1. redis handler func cache_handler() { client := redis.newclient(\u0026amp;redis.options{ addr: \u0026#34;localhost:6349\u0026#34; password: \u0026#34;\u0026#34; // no password, to get it from env variables use: `os.getenv(\u0026#34;env\u0026#34;)` db: 0 // default db }) } 2. mysql handler func database_handler() { sql_url := \u0026#34;root@localhost:3360\u0026#34; db, err := sql.open(\u0026#34;mysql\u0026#34;, sql_url) if err != nil { pandic(err.error()) } defer db.close() /* continue */ } 3. json parser - unmarshal type movie struct { name string `json:\u0026#34;name\u0026#34;` publisher string `json:\u0026#34;publisher\u0026#34;` year int `json:\u0026#34;year\u0026#34;` } func handlemovie() { // var target map[string]any /* not optimal */ var movie movie input := `{ \u0026#34;name\u0026#34;: \u0026#34;jocker\u0026#34;, \u0026#34;publisher\u0026#34;: \u0026#34;wb\u0026#34;, \u0026#34;year\u0026#34;: 2019 }` // err := json.unmarshal([]byte(input), \u0026amp;target) /* not optimal */ err := json.unmarshal([]byte(input), \u0026amp;movie) /* not optimal */ if err != nil { log.fatalf(\u0026#34;unable to marshal json due to %s\u0026#34;, err) } /* not optimal */ // for k, v := range target { // fmt.printf(\u0026#34;k: %s, v: %v\\n\u0026#34;, k, v) // } fmt.printf( \u0026#34;name: %s, publisher: %s, year: %d\\n\u0026#34;, movie.name, movie.publisher, movie.year, ) } 3.1. complex json assets/complex.json { \u0026#34;name\u0026#34;: \u0026#34;james peterson\u0026#34;, \u0026#34;age\u0026#34;: 37, \u0026#34;address\u0026#34;: { \u0026#34;line1\u0026#34;: \u0026#34;block 78 woodgrove avenue 5\u0026#34;, \u0026#34;line2\u0026#34;: \u0026#34;unit #05-111\u0026#34;, \u0026#34;postal\u0026#34;: \u0026#34;654378\u0026#34; }, \u0026#34;pets\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;lex\u0026#34;, \u0026#34;kind\u0026#34;: \u0026#34;dog\u0026#34;, \u0026#34;age\u0026#34;: 4, \u0026#34;color\u0026#34;: \u0026#34;gray\u0026#34; }, { \u0026#34;name\u0026#34;: \u0026#34;faye\u0026#34;, \u0026#34;kind\u0026#34;: \u0026#34;cat\u0026#34;, \u0026#34;age\u0026#34;: 6, \u0026#34;color\u0026#34;: \u0026#34;orange\u0026#34; } ] } examples/complex_json/main.go type ( fullperson struct { address address name string pets []pet age int } pet struct { name string kind string color string age int } address struct { line1 string line2 string postal string } ) func main() { b, err := os.readfile(\u0026#34;assets/complex.json\u0026#34;) if err != nil { log.fatalf(\u0026#34;unable to read file due to %s\\n\u0026#34;, err) } var person fullperson err = json.unmarshal(b, \u0026amp;person) if err != nil { log.fatalf(\u0026#34;unable to marshal json due to %s\u0026#34;, err) } litter.dump(person) } 3.2. common pitfalls with json unmarshalling in go extra fields are omitted in the target struct\nmissing fields fallback to zero values\nunmarshalling is case insensitive\nfield names must match json keys exactly\ntype aliases are preserved\n4. json parser - marshal the json.marshal() method does the opposite of unmarshal() by converting a given data structure into a json.\nexamples/basic_marshal/main.go func marshal(in any) []byte { out, err := json.marshal(in) if err != nil { log.fatalf(\u0026#34;unable to marshal due to %s\\n\u0026#34;, err) } return out } func main() { first := marshal(14) second := marshal(\u0026#34;hello world\u0026#34;) third := marshal([]float32{1.66, 6.86, 10.1}) fourth := marshal(map[string]int{\u0026#34;num\u0026#34;: 15, \u0026#34;other\u0026#34;: 17}) fmt.printf( \u0026#34;first: %s\\nsecond: %s\\nthird: %s\\nfourth: %s\\n\u0026#34;, first, second, third, fourth, ) } 4.1. structs func main() { p := person{ name: \u0026#34;john jones\u0026#34;, age: 26, email: \u0026#34;johnjones@email.com\u0026#34;, phone: \u0026#34;89910119\u0026#34;, hobbies: []string{ \u0026#34;swimming\u0026#34;, \u0026#34;badminton\u0026#34;, }, } b, err := json.marshal(p) if err != nil { log.fatalf(\u0026#34;unable to marshal due to %s\\n\u0026#34;, err) } fmt.println(string(b)) } if you wish to format the json object, you can use the marshalindent() method which performs the same function as marshal() but applies some indentation to format the output. 4.2. customizing json field names with struct tags type dog struct { breed string name string favoritetreat string age int } var dog = dog{ breed: \u0026#34;golden retriever\u0026#34;, age: 8, name: \u0026#34;paws\u0026#34;, favoritetreat: \u0026#34;kibble\u0026#34;, } type dog struct { breed string `json:\u0026#34;breed\u0026#34;` name string `json:\u0026#34;name\u0026#34;` favoritetreat string `json:\u0026#34;favorite_treat\u0026#34;` age int `json:\u0026#34;age\u0026#34;` } func main() { input := `{ \u0026#34;name\u0026#34;: \u0026#34;coffee\u0026#34;, \u0026#34;breed\u0026#34;: \u0026#34;toy poodle\u0026#34;, \u0026#34;age\u0026#34;: 5, \u0026#34;favorite_treat\u0026#34;: \u0026#34;kibble\u0026#34; }` var coffee dog err := json.unmarshal([]byte(input), \u0026amp;coffee) if err != nil { log.fatalf(\u0026#34;unable to marshal json due to %s\u0026#34;, err) } litter.dump(coffee) } 4.3. other uses of struct tags omit an empty field (one with its zero value in go) type user struct { username string `json:\u0026#34;username\u0026#34;` password string `json:\u0026#34;-\u0026#34;` email string `json:\u0026#34;email\u0026#34;` hobbies []string `json:\u0026#34;hobbies,omitempty\u0026#34;` } 5. validating json data func main() { good := `{\u0026#34;name\u0026#34;: \u0026#34;john doe\u0026#34;}` bad := `{name: \u0026#34;john doe\u0026#34;}` fmt.println(json.valid([]byte(good))) fmt.println(json.valid([]byte(bad))) } 6. defining custom behavior - marshal / unmarshal data in go, you can define custom behavior for marshalling data by implementing the json.marshaler interface. this interface defines a single method, marshaljson() which takes no arguments and returns a byte slice and an error.\nto implement the json.marshaler interface, you need to define a new type that wraps the original type you want to marshal. this new type should have a method named marshaljson() that returns a byte slice and an error.\nexamples/custom_timestamp/main.go type ( customtime struct { time.time } baby struct { birthdate customtime `json:\u0026#34;birth_date\u0026#34;` name string `json:\u0026#34;name\u0026#34;` gender string `json:\u0026#34;gender\u0026#34;` } ) in the above snippet, we defined a new customtime type that wraps a time.time value. in is subsequently used in the baby struct as the type of the birthdate value.\nhere’s an example that marshals a value of type baby below:\nfunc main() { baby := baby{ name: \u0026#34;johnny\u0026#34;, gender: \u0026#34;male\u0026#34;, birthdate: customtime{ time.date(2023, 1, 1, 12, 0, 0, 0, time.now().location()), }, } b, err := json.marshal(baby) if err != nil { log.fatalf(\u0026#34;unable to marshal due to %s\\n\u0026#34;, err) } fmt.println(string(b)) } notice how the birth_date presented in the rfc 3339 format. you can now define the custom marshalling behavior that will return a different format for customtime values (such as dd-mm-yyyy) instead of the default rfc 3339 timestamp format.\nyou only need to define a marshaljson() method for the type as shown below:\nexamples/custom_timestamp/main.go func (ct customtime) marshaljson() ([]byte, error) { return []byte(fmt.sprintf(`%q`, ct.time.format(\u0026#34;02-01-2006\u0026#34;))), nil } ","title":"Webserver"},{"date":"2024-05-26","image":"","imageAlt":"","link":"https://hossein-lap.github.io/readme/","summary":"\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWelcome to my blog. I’m Hossein and I’ll be posting myown notes, ideas,\nprograms. A Programmer / DevOps Engineer with passions about open-source\nsoftware and trees.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAlso, I use vim btw ;)\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"quoteblock\"\u003e\n\u003cdiv class=\"title\"\u003e\u003cstrong\u003eBookshelf\u003c/strong\u003e\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003eLanguages\u003c/dt\u003e\n\u003cdd\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eLua\u003c/code\u003e \u003ccode\u003eGo\u003c/code\u003e \u003ccode\u003eC\u003c/code\u003e \u003ccode\u003eBash\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003eTools\u003c/dt\u003e\n\u003cdd\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eLinux\u003c/code\u003e \u003ccode\u003eGit\u003c/code\u003e \u003ccode\u003eDocker\u003c/code\u003e \u003ccode\u003eKubernetes\u003c/code\u003e \u003ccode\u003eAnsible\u003c/code\u003e \u003ccode\u003eQEMU/KVM\u003c/code\u003e \u003ccode\u003eVim\u003c/code\u003e \u003ccode\u003etmux\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003eWriting\u003c/dt\u003e\n\u003cdd\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eLaTeX\u003c/code\u003e \u003ccode\u003eGroff\u003c/code\u003e \u003ccode\u003eAsciidoc\u003c/code\u003e \u003ccode\u003eMarkdown\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003eHobbies\u003c/dt\u003e\n\u003cdd\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eCoding\u003c/code\u003e \u003ccode\u003eWriting\u003c/code\u003e \u003ccode\u003eBiking\u003c/code\u003e \u003ccode\u003eVolleyball\u003c/code\u003e \u003ccode\u003eFishing\u003c/code\u003e \u003ccode\u003eMusic\u003c/code\u003e \u003ccode\u003eMovies\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003c/blockquote\u003e\n\u003c/div\u003e","tags":[],"text":" welcome to my blog. i’m hossein and i’ll be posting myown notes, ideas, programs. a programmer / devops engineer with passions about open-source software and trees.\nalso, i use vim btw ;)\nbookshelf languages lua go c bash\ntools linux git docker kubernetes ansible qemu/kvm vim tmux\nwriting latex groff asciidoc markdown\nhobbies coding writing biking volleyball fishing music movies\n","title":""},{"date":"2024-04-02","image":"","imageAlt":"","link":"https://hossein-lap.github.io/docs/lua/","summary":"Lua is a powerful, fast, lightweight and embeddable programming language.\nIt is used by many frameworks, games and other applications.\n","tags":["Embedded","Game","Lua","Plugin"],"text":" lua is a powerful, fast, lightweight and embeddable programming language. it is used by many frameworks, games and other applications. while it can be used by itself, it has been designed to be easy to embed in another application. it is implemented in ansi c, a subset of c programming language that is very portable, which means it can run on many systems and many devices where the most other scripting languages would not be able to run.\n\u0026#34;lua\u0026#34; (pronounced loo-ah) means \u0026#34;moon\u0026#34; in portuguese. as such, it is neither an acronym nor an abbreviation, but a noun. lua comes from two languages: del and sol. del means \u0026#34;data entry language\u0026#34;, while sol means \u0026#34;simple object language\u0026#34; and also means sun in portuguese.\none of main advantages of lua is its simplicity. programming which is also called scripting in the case of programs that run inside an embedded applications, is the process of writing computer program. a programming language is a language used to give instructions to a computer through computer code that is contained in a computer program. a programming language consists of two things: a syntax, which is like grammar in english, and libraries, basic functions provided with the language. these libraries could be compared with vocabulary in english.\n1. hello world! lua can either be used embedded in an application or by itself. the first example of lua code in this book will be the basic and traditional hello world program.\na \u0026#34;hello world\u0026#34; program is a computer program that outputs \u0026#34;hello, world\u0026#34; on a display device. because it is typically one of the simplest programs possible in most programming languages, it is by tradition often used to illustrate to beginners the most basic syntax of a programming language, or to verify that a language or system is operating correctly.\nprint(\u0026#34;hello world!\u0026#34;) the code above prints the text hello, world! to the output. it does so by calling the print function with the string \u0026#34;hello, world!\u0026#34; as an argument.\n2. syntax syntax of a programming language defines how statements and expressions must be written in that programming language, just like grammar defines how sentences and words must be written. statements and expressions can be respectively compared to sentences and words.\nlua is a dynamically typed language intended for use as an extension language or scripting language.\nstatements and expressions can be respectively compared to sentences and words. expressions are pieces of code that have a value and that can be evaluated, while statements are pieces of code that can be executed and contain an instruction with one or many expressions to use that instruction with.\nfor example, 3 + 5 is an expression and variable = 3 + 5 is a statement that sets the value of variable to that expression.\n-- different types local x = 10 -- number local name = \u0026#34;neo\u0026#34; -- string local is_alive = false -- boolean local a = nil -- no value or invalid value 3. obtaining lua lua can be obtained on the official lua website, on the download page.\n4. basics if you are using the stand-alone lua interpreter, all you have to do to run your first program is to call the interpreter -usually named lua or lua5.3/lua5.4- with the name of the text file that contains your program. if you save the hello world program in a file hello.lua, the following command should run it:\n$ lua hello.lua as a more complex example, the next program defines a function to compute the factorial of a given number, asks the user for a number, and prints its factorial:\n-- defines a factorial function function fact (n) if n == 0 then return 1 else return n * fact(n - 1) end end print(\u0026#34;enter a number:\u0026#34;) a = io.read(\u0026#34;*n\u0026#34;) -- reads a number print(fact(a)) 5. chuncks we call each piece of code that lua executes, such as a file or a single line in interactive mode, a chunk. a chunk is simply a sequence of commands (or statements).\na chunk can be as simple as a single statement, such as in the \u0026#34;hello world\u0026#34; example, or it can be composed of a mix of statements and function definitions (which are actually assignments, as we will see later), such as the factorial example.\ninstead of writing your program to a file, you can run the stand-alone interpreter in interactive mode. if you call lua without any arguments, you will get its prompt:\n$ lua lua 5.4.4 copyright (c) 1994-2022 lua.org, puc-rio \u0026gt; thereafter, each command that you type (such as print \u0026#34;hello world\u0026#34;) executes immediately after you enter it. to exit the interactive mode and the interpreter, just type the end-of-file control character (ctrl-d in posix, ctrl-z in windows), or call the function os.exit, from the operating system library - you have to type os.exit().\nstarting in version 5.4, we can enter expressions directly in the interactive mode, and lua will print their values:\n$ lua lua 5.4.4 copyright (c) 1994-2022 lua.org, puc-rio \u0026gt; math.pi / 4 --\u0026gt; 0.78539816339745 \u0026gt; a = 15 \u0026gt; a ^ 2 --\u0026gt; 225 \u0026gt; a + 2 --\u0026gt; 17 in older versions, we need to precede these expressions with an equals sign:\n$ lua5.2 lua 5.2.3 copyright (c) 1994-2013 lua.org, puc-rio \u0026gt; a = 15 \u0026gt; = a ^ 2 --\u0026gt; 225 for compatibility, lua 5.4 still accepts these equals signs.\nto run that code as a chunk (not in interactive mode), we must enclose the expressions inside calls to print:\nprint(math.pi / 4) --\u0026gt; 0.78539816339745 a = 15 print(a ^ 2) --\u0026gt; 225 print(a + 2) --\u0026gt; 17 lua usually interprets each line that we type in interactive mode as a complete chunk or expression. however, if it detects that the line is not complete, it waits for more input, until it has a complete chunk. this way, we can enter a multi-line definition, such as the factorial function, directly in interactive mode. however, it is usually more convenient to put such definitions in a file and then call lua to run the file.\nwe can use the -i option to instruct lua to start an interactive session after running a given chunk:\n$ lua -i prog a command line like this one will run the chunk in the file prog and then prompt for interaction. this is especially useful for debugging and manual testing.\nanother way to run chunks is with the function dofile, which immediately executes a file. for instance, suppose we have a file lib1.lua with the following code:\nfunction norm (x, y) return math.sqrt(x^2 + y^2) end function twice (x) return 2.0 * x end then, in interactive mode, we can type this code:\n\u0026gt; dofile(\u0026#34;lib1.lua\u0026#34;) -- load our library \u0026gt; n = norm(3.4, 1.0) \u0026gt; twice(n) --\u0026gt; 7.0880180586677 the function dofile is useful also when we are testing a piece of code. we can work with two windows: one is a text editor with our program (in a file prog.lua, say) and the other is a console running lua in interactive mode. after saving a modification in our program, we execute dofile(\u0026#34;prog.lua\u0026#34;) in the lua console to load the new code; then we can exercise the new code, calling its functions and printing the results.\n5.1. some lexical conventions identifiers (or names) in lua can be any string of letters, digits, and underscores, not beginning with a digit; for instance\ni\nj\ni10\n_ij\nasomewhatlongname\n_input\nyou should avoid identifiers starting with an underscore followed by one or more upper-case letters (e.g., _version); they are reserved for special uses in lua. usually, i reserve the identifier _ (a single underscore) for dummy variables.\nthe following words are reserved; we cannot use them as identifiers:\nand end if or until break false in repeat while do for local return else function nil then elseif goto not true lua is case-sensitive and is a reserved word, but and and and are two different identifiers.\n6. comments a comment is a code annotation that is ignored by the programming language. comments can be used to describe one or many lines of code, to document a program, to temporarily disable code, or for any other reason.\nthey need to be prefixed by two hyphens to be recognized by lua and they can be put either on their own line or at the end of another line:\nprint(\u0026#34;this is normal code.\u0026#34;) -- this is a comment print(\u0026#34;this is still normal code.\u0026#34;) -- comment at the end of a line of code. these comments are called short comments. it is also possible to create long comments, which start with a long bracket and can continue on many lines:\nprint(\u0026#34;this is normal code\u0026#34;) --[[line 1 line 2 ]] long brackets consist of two brackets in the middle of which any number of equality signs may be put. that number is called the level of the long bracket. long brackets will continue until the next bracket of the same level, if there is one.\na long bracket with no equal sign is called a long bracket of level 0. this approach makes it possible to use closing double brackets inside of long comments by adding equal signs in the middle of the two brackets. it is often useful to do this when using comments to disable blocks of code.\n--[==[ this is a comment that contains a closing long bracket of level 0 which is here: ]] however, the closing double bracket doesn\u0026#39;t make the comment end, because the comment was opened with an opening long bracket of level 2, and only a closing long bracket of level 2 can close it. ]==] in the example above, the closing long bracket of level 0 (]]) does not close the comment, but the closing long bracket of level 2 (]==]) does.\nlong comments can be more complex than that, as we will see in the section called \u0026#34;long strings\u0026#34;.\n7. expressions expressions are pieces of code that have a value and that can be evaluated. they cannot be executed directly (with the exception of function calls), and thus, a script that would contain only the following code, which consists of an expression, would be erroneous:\n3 + 5 the code above is erroneous because all it contains is an expression. the computer cannot execute 3 + 5, since that does not make sense.\ncode must be comprised of a sequence of statements. these statements can contain expressions which will be values the statement has to manipulate or use to execute the instruction.\nsome code examples in this chapter do not constitute valid code, because they consist of only expressions. in the next chapter, statements will be covered and it will be possible to start writing valid code.\nlua needs no separator between consecutive statements, but we can use a semicolon if we wish. line breaks play no role in lua’s syntax; for instance, the following four chunks are all valid and equivalent:\na = 1 b = a * 2 a = 1; b = a * 2; a = 1; b = a * 2 a = 1 b = a * 2 -- ugly, but valid 8. global variables global variables do not need declarations; we simply use them. it is not an error to access a non-initialized variable; we just get the value nil as the result:\n\u0026gt; b --\u0026gt; nil \u0026gt; b = 10 \u0026gt; b --\u0026gt; 10 if we assign nil to a global variable, lua behaves as if we have never used the variable:\n\u0026gt; b = nil \u0026gt; b --\u0026gt; nil lua does not differentiate a non-initialized variable from one that we assigned nil. after the assignment, lua can eventually reclaim the memory used by the variable.\n9. types and values lua is a dynamically-typed language. there are no type definitions in the language; each value carries its own type.\nthere are eight basic types in lua: nil, boolean, number, string, userdata, function, thread, and table. the function type gives the type name of any given value:\n\u0026gt; type(nil) --\u0026gt; nil \u0026gt; type(true) --\u0026gt; boolean \u0026gt; type(10.4 * 3) --\u0026gt; number \u0026gt; type(\u0026#34;hello world\u0026#34;) --\u0026gt; string \u0026gt; type(io.stdin) --\u0026gt; userdata \u0026gt; type(print) --\u0026gt; function \u0026gt; type(type) --\u0026gt; function \u0026gt; type({}) --\u0026gt; table \u0026gt; type(type(x)) --\u0026gt; string the last line will result in “string” no matter the value of x, because the result of type is always a string.\nthe userdata type allows arbitrary c data to be stored in lua variables. it has no predefined operations in lua, except assignment and equality test. userdata are used to represent new types created by an application program or a library written in c; for instance, the standard i/o library uses them to represent open files. we will discuss more about userdata later, when we get to the c api.\nvariables have no predefined types; any variable can contain values of any type:\n\u0026gt; type(a) --\u0026gt; nil (\u0026#39;a\u0026#39; is not initialized) \u0026gt; a = 10 \u0026gt; type(a) --\u0026gt; number \u0026gt; a = \u0026#34;a string!!\u0026#34; \u0026gt; type(a) --\u0026gt; string \u0026gt; a = nil \u0026gt; type(a) --\u0026gt; nil the list of data types for values are given below.\ntype description\nnil used to differentiate the value from having some data or no(nil) data.\nboolean includes true and false as values. generally used for condition checking.\nnumber represents real(double precision floating point) numbers.\nstring represents array of characters.\nfunction represents a method that is written in c or lua.\nuserdata represents arbitrary c data.\nthread represents independent threads of execution and it is used to implement coroutines.\ntable represent ordinary arrays, symbol tables, sets, records, graphs, trees, etc., and implements associative arrays. it can hold any value (except nil).\nusually, when we use a single variable for different types, the result is messy code. however, sometimes the judicious use of this facility is helpful, for instance in the use of nil to differentiate a normal return value from an abnormal condition.\nby default, all the variables will point to nil until they are assigned a value or initialized.\nwe will discuss now the simple types nil and boolean.\n9.1. nil nil is a type with a single value, nil, whose main property is to be different from any other value. lua uses nil as a kind of non-value, to represent the absence of a useful value. as we have seen, a global variable has a nil value by default, before its first assignment, and we can assign nil to a global variable to delete it.\n9.2. booleans the boolean type has two values, false and true, which represent the traditional boolean values. however, booleans do not hold a monopoly of condition values: in lua, any value can represent a condition. conditional tests (e.g., conditions in control structures) consider both the boolean false and nil as false and anything else as true. in particular, lua considers both zero and the empty string as true in conditional tests.\nthroughout this book, i will write \u0026#34;false\u0026#34; to mean any false value, that is, the boolean false or nil. when i mean specifically the boolean value, i will write \u0026#34;false\u0026#34;. the same holds for \u0026#34;true\u0026#34; and “true”.\nlua supports a conventional set of logical operators: and, or, and not. like control structures, all logical operators consider both the boolean false and nil as false, and anything else as true. the result of the and operator is its first operand if that operand is false; otherwise, the result is its second operand. the result of the or operator is its first operand if it is not false; otherwise, the result is its second operand:\n\u0026gt; 4 and 5 --\u0026gt; 5 \u0026gt; nil and 13 --\u0026gt; nil \u0026gt; false and 13 --\u0026gt; false \u0026gt; 0 or 5 --\u0026gt; 0 \u0026gt; false or \u0026#34;hi\u0026#34; --\u0026gt; \u0026#34;hi\u0026#34; \u0026gt; nil or false --\u0026gt; false both and and or use short-circuit evaluation, that is, they evaluate their second operand only when necessary. short-circuit evaluation ensures that expressions like (i ~= 0 and a/i \u0026gt; b) do not cause run-time errors: lua will not try to evaluate a / i when i is zero.\na useful lua idiom is x = x or v, which is equivalent to\nif not x then x = v end that is, it sets x to a default value v when x is not set (provided that x is not set to false).\nanother useful idiom is ((a and b) or c) or simply (a and b or c) (given that and has a higher precedence than or). it is equivalent to the c expression a ? b : c, provided that b is not false. for instance, we can select the maximum of two numbers x and y with the expression (x \u0026gt; y) and x or y. when x \u0026gt; y, the first expression of the and is true, so the and results in its second operand (x), which is always true (because it is a number), and then the or expression results in the value of its first operand, x. when x \u0026gt; y is false, the and expression is false and so the or results in its second operand, y.\nthe not operator always gives a boolean value:\n\u0026gt; not nil --\u0026gt; true \u0026gt; not false --\u0026gt; true \u0026gt; not 0 --\u0026gt; false \u0026gt; not not 1 --\u0026gt; true \u0026gt; not not nil --\u0026gt; false the following operators are often used with boolean values, but can also be used with values of any data type:\noperation syntax description boolean negation\nnot a\nif a is false or nil, returns true. otherwise, returns false.\nlogical conjunction\na and b\nreturns the first argument if it is false or nil. otherwise, returns the second argument.\nlogical disjunction\na or b\nreturns the first argument if it is neither false nor nil. otherwise, returns the second argument.\nessentially, the not operator just negates the boolean value (makes it false if it is true and makes it true if it is false), the and operator returns true if both are true and false if not and the or operator returns true if either of arguments is true and false otherwise.\nlocal is_alive = true print(is_alive) -- true local is_alive = false print(is_alive) -- false 9.3. numbers numbers generally represent quantities, but they can be used for many other things. the number type in lua works mostly in the same way as real numbers.\nnumbers can be constructed as integers, decimal numbers, decimal exponents or even in hexadecimal. here are some valid numbers:\n3\n3.0\n3.1416\n314.16e-2\n0.31416e1\n0xff\n0x56\n-- the lua local a = 1 local b = 2 local c = a + b print(c) -- 3 local d = b - a print(d) local x = 1 * 3 * 4 -- 12 print(x) local y = (1+3) * 2 -- 8 print(y) print(10 / 2) -- 5 print(2 ^ 2) -- 4 print(5 % 2) -- 1 print(-b) -- -2 -- incerment local level = 1 level = level + 1 print(level) 9.3.1. arithmetic operations the operators for numbers in lua are the following:\noperation syntax description example arithmetic negation\n-a\nchanges the sign of a and returns the value\n-3.14159\naddition\na + b\nreturns the sum of a and b\n5.2 + 3.6\nsubtraction\na - b\nsubtracts b from a and returns the result\n5.2 + 3.6\nmultiplication\na * b\nreturns the product of a and b\n3.2 _ 1.5\nexponentiation\na ^ b\nreturns a to the power b, or the exponentiation of a by b\n5 ˆ 2\ndivision\na / b\ndivides a by b and returns the result\n6.4 / 2\nmodulus operation\na % b\nreturns the remainder of the division of a by b\n5 % 3\n9.3.2. integers a new subtype of numbers, integers, was added in lua 5.3. numbers can be either integers or floats. floats are similar to numbers as described above, while integers are numbers with no decimal part.\nfloat division (/) and exponentiation always convert their operands to floats, while all other operators give integers if their two operands were integers. in other cases, with the exception of the floor division operator (//) the result is a float.\n9.4. strings strings are sequences of characters that can be used to represent text. they can be written in lua by being contained in double quotes, single quotes or long brackets (it should be noted that comments and strings have nothing in common other than the fact they can both be delimited by long brackets, preceded by two hyphens in the case of comments).\nstrings that aren’t contained in long brackets will only continue for one line. because of this, the only way to make a string that contains many lines without using long brackets is to use escape sequences. this is also the only way to insert single or double quotes in certain cases.\n\u0026#39; \u0026#39;\n\u0026#34; \u0026#34;\n[[ ]]\nlocal phrase = [[my name is ]] local name = \u0026#39;p j\u0026#39; print(phrase .. name) -- my name is p j -- strings and numbers local age = 21 local name = \u0026#34;billy\u0026#34; print(name .. \u0026#34; is \u0026#34; .. age .. \u0026#34; years old\u0026#34;) escape sequence characters are used in string to change the normal interpretation of characters.\nfor example, to print double inverted commas (\u0026#34;\u0026#34;), we have to use \\\u0026#34; in the string.\nthe escape sequence and its use is listed below in the table.\nescape sequence use\n\\a bell\n\\b backspace\n\\f formfeed\n\\n new line\n\\r carriage return\n\\t tab\n\\v vertical tab\n\\\\ backslash\n\\\u0026#34; double quotes\n\\\u0026#39; single quotes\n\\[ left square bracket\n\\] right square bracket\nit is possible to get the length of a string, as a number, by using the unary length operator (#):\nprint(#(\u0026#34;this is a string\u0026#34;)) --\u0026gt; 16 9.4.1. concatenation in formal language theory and computer programming string concatenation is the operation of joining two character strings end-to-end.\nexample 1. \u0026#34;snowball\u0026#34; the concatenation of \u0026#34;snow\u0026#34; and \u0026#34;ball\u0026#34;.\n9.5. other types the four basic types in lua (numbers, booleans, nil and strings) have been described in the previous sections, but four types are missing: functions, tables, userdata and threads.\nfunctions pieces of code that can be called, receive values and return values back.\ntables data structures that can be used for data manipulation.\nuserdata used internally by applications lua is embedded in to allow lua to communicate with that program through objects controlled by the application.\nthreads used by coroutines, which allow many functions to run at the same time.\n10. literals ","title":"Lua"},{"date":"2024-04-02","image":"","imageAlt":"","link":"https://hossein-lap.github.io/docs/go/","summary":"go is a very simple programming language with a strong standard library and\nuseful features.\n","tags":["CLI","Go"],"text":" insert lead paragraph here.\n1. new stuff very versile\n2. more stuff package main import ( \u0026#34;fmt\u0026#34; ) func main() { fmt.printf(\u0026#34;this is a simple test!\\n\u0026#34;) } ","title":"Golang"},{"date":"2024-04-02","image":"","imageAlt":"","link":"https://hossein-lap.github.io/docs/asciidoc/","summary":"AsciiDoc is a markup language similar to markdown but vay more standardized\nand with more features/elements.\n","tags":["AsciiDoc","Documentation","Writing"],"text":" 1. intro okay, let’s do it.\ntest const char *colorname[] = { /* 8 normal colors */ [0] = \u0026#34;#050d0d\u0026#34;, /* black */ [1] = \u0026#34;#546168\u0026#34;, /* red */ [2] = \u0026#34;#b94730\u0026#34;, /* green */ [3] = \u0026#34;#ec5727\u0026#34;, /* yellow */ [4] = \u0026#34;#f2ad59\u0026#34;, /* blue */ [5] = \u0026#34;#557886\u0026#34;, /* magenta */ [6] = \u0026#34;#967d82\u0026#34;, /* cyan */ [7] = \u0026#34;#adbdc3\u0026#34;, /* white */ /* 8 bright colors */ [8] = \u0026#34;#798488\u0026#34;, /* black */ [9] = \u0026#34;#546168\u0026#34;, /* red */ [10] = \u0026#34;#b94730\u0026#34;, /* green */ [11] = \u0026#34;#ec5727\u0026#34;, /* yellow */ [12] = \u0026#34;#f2ad59\u0026#34;, /* blue */ [13] = \u0026#34;#557886\u0026#34;, /* magenta */ [14] = \u0026#34;#967d82\u0026#34;, /* cyan */ [15] = \u0026#34;#adbdc3\u0026#34;, /* white */ /* special colors */ [256] = \u0026#34;#050d0d\u0026#34;, /* background */ [257] = \u0026#34;#adbdc3\u0026#34;, /* foreground */ [258] = \u0026#34;#adbdc3\u0026#34;, /* cursor */ }; /* default colors (colorname index) * foreground, background, cursor */ unsigned int defaultbg = 0; unsigned int defaultfg = 257; unsigned int defaultcs = 258; unsigned int defaultrcs= 258; 2. lists 2.1. unordered lists * level 1 ** level 2 *** level 3 **** level 4 ***** level 5 * level 1 example 1. output level 1\nlevel 2\nlevel 3\nlevel 4\nlevel 5\nlevel 1\n2.2. ordered lists . level 1 .. level 2 ... level 3 .... level 4 ..... level 5 . level 1 example 2. output level 1\nlevel 2\nlevel 3\nlevel 4\nlevel 5\nlevel 1\n2.3. todo lists - [*] checked - [x] also checked - [ ] not checked - normal list item example 3. output checked\nalso checked\nnot checked\nnormal list item\n2.4. separating lists . apples . oranges //- . walnuts . almonds example 4. output apples\noranges\nwalnuts\nalmonds\n3. definitions 3.1. normal definition list first term:: definition of first term section term:: definition of second term example 5. output first term definition of first term\nsection term definition of second term\n3.2. horizontal definition list [horizontal] first term:: definition of first term section term:: definition of second term example 6. output ghis is a very very first term definition of first term\nsection term definition of second term\n3.3. multi-line definition list first term:: definition of first term section term:: definition of second term example 7. output first term definition of first term\nsection term definition of second term\n3.4. q\u0026amp;a [qanda] what is asciidoctor?:: an implementation of the asciidoc processor in ruby. what is the answer to the ultimate question?:: 42 example 8. output what is asciidoctor?\nan implementation of the asciidoc processor in ruby.\nwhat is the answer to the ultimate question?\n42\n3.5. mixed operating systems:: linux::: . fedora * desktop . ubuntu * desktop * server bsd::: . freebsd . netbsd cloud providers:: paas::: . openshift . cloudbees iaas::: . amazon ec2 . rackspace example 9. output operating systems linux fedora\ndesktop\nubuntu\ndesktop\nserver\nbsd freebsd\nnetbsd\ncloud providers paas openshift\ncloudbees\niaas amazon ec2\nrackspace\nnote that the indentation is optional 3.6. complex content in outline lists * every list item has at least one paragraph of content, which may be wrapped, even using a hanging indent. + additional paragraphs or blocks are adjoined by putting a list continuation on a line adjacent to both blocks. + list continuation:: a plus sign (`{plus}`) on a line by itself * a literal paragraph does not require a list continuation. $ gem install asciidoctor * asciidoc lists may contain any complex content. + [cols=\u0026#34;2\u0026#34;, options=\u0026#34;header\u0026#34;] |=== |application |language |asciidoc |python |asciidoctor |ruby |=== example 10. output every list item has at least one paragraph of content, which may be wrapped, even using a hanging indent.\nadditional paragraphs or blocks are adjoined by putting a list continuation on a line adjacent to both blocks.\nlist continuation a plus sign (+) on a line by itself\na literal paragraph does not require a list continuation.\n$ gem install asciidoctor asciidoc lists may contain any complex content.\napplication language asciidoc\npython\nasciidoctor\nruby\n4. links 4.1. external http://asciidoctor.org - automatic! http://asciidoctor.org[asciidoctor] https://github.com/asciidoctor[asciidoctor @ *github*] example 11. output http://asciidoctor.org - automatic!\nasciidoctor\nasciidoctor @ github\n4.2. relative link:test.adoc[docs] example 12. output docs\n4.3. email and irc devel@discuss.arquillian.org mailto:devel@discuss.arquillian.org[discuss arquillian] mailto:devel-join@discuss.arquillian.org[subscribe, subscribe me, i want to join!] irc://irc.freenode.org/#asciidoctor example 13. output devel@discuss.arquillian.org\ndiscuss arquillian\nsubscribe\nirc://irc.freenode.org/#asciidoctor\n4.4. inline anchors [[bookmark-a]]inline anchors make arbitrary content referenceable. anchor:bookmark-b[]use a cross reference to link to this location. example 14. output inline anchors make arbitrary content referenceable.\nuse a cross reference to link to this location.\n4.5. internal cross references see \u0026lt;\u0026lt;paragraphs\u0026gt;\u0026gt; to learn how to write paragraphs. learn how to organize the document into \u0026lt;\u0026lt;section-titles,sections\u0026gt;\u0026gt;. example 15. output see [paragraphs] to learn how to write paragraphs.\nlearn how to organize the document into sections.\n4.6. images image::/images/asciidoc/rose.png[] image::/images/asciidoc/rose.png[rose] [[img-sunset]] image::/images/asciidoc/rose.png[caption=\u0026#34;figure 1: \u0026#34;, title=\u0026#34;a rose\u0026#34;, alt=\u0026#34;rose\u0026#34;, width=\u0026#34;300\u0026#34;, height=\u0026#34;200\u0026#34;, link=\u0026#34;http://www.flickr.com/photos/javh/5448336655\u0026#34;] image::http://asciidoctor.org/images/octocat.jpg[github mascot] example 16. output figure 1: a rose 5. admonition paragraph 5.1. note note: this is a note! example 17. output this is a note! 5.2. tip tip: this is a tip! example 18. output this is a tip! 5.3. warning warning: this is a warning! example 19. output this is a warning! 5.4. caution caution: this is a caution! example 20. output this is a caution! 5.5. important important: this is a important! example 21. output this is a important! 5.6. admonition blocks [note] ==== this is an example of an admonition block. unlike an admonition paragraph, it may contain any asciidoc content. the style can be any one of the admonition labels: * note * tip * warning * caution * important ==== example 22. output this is an example of an admonition block. unlike an admonition paragraph, it may contain any asciidoc content. the style can be any one of the admonition labels:\nnote\ntip\nwarning\ncaution\nimportant\n6. blocks 6.1. listing block ----- this is a **_listing block_** ----- example 23. output this is a **_listing block_** 6.2. example block ===== this is a **_example block_** ===== example 24. output this is a example block\n6.3. comment block //// this is a **_comment block_** //// example 25. output 6.4. literal block .... this is a **_literal block_** .... example 26. output this is a **_literal block_** 6.5. pass block ++++ == this is raw text ++++ example 27. output == this is raw text 6.6. quote/verse block ____ this is a very very simple quote ____ example 28. output this is a very very simple quote\n6.6.1. blockqoutes .after landing the cloaked klingon bird of prey in golden gate park: [quote,captain james t. kirk,star trek iv: the voyage home] everybody remember where we parked. example 29. output after landing the cloaked klingon bird of prey in golden gate park: everybody remember where we parked. — captain james t. kirk star trek iv: the voyage home 6.7. sidebar block .some title **** this is a sidebar block -- i have no idea why it\u0026#39;s called `sidebar` **** example 30. output some title this is a sidebar block — i have no idea why it’s called sidebar\n6.8. block metadata .gettysburg address [[gettysburg]] [quote, abraham lincoln, soldiers\u0026#39; national cemetery dedication] ---- four score and seven years ago our fathers brought forth on this continent a new nation... now we are engaged in a great civil war, testing whether that nation, or any nation so conceived and so dedicated, can long endure. ... ---- example 31. output gettysburg address four score and seven years ago our fathers brought forth on this continent a new nation... now we are engaged in a great civil war, testing whether that nation, or any nation so conceived and so dedicated, can long endure. ... 7. customization (wip) 8. render (wip) ","title":"AsciiDoc(tor): Yo Dawg!"},{"date":"2024-04-02","image":"","imageAlt":"","link":"https://hossein-lap.github.io/docs/elixir/","summary":"Elixir is a function programming language which uses Erlang's VM (BEAM)\nand has a very similar approach to Erlang\n","tags":["Elixir","Functional"],"text":" elixir is a dynamically-typed functional programming language.\n1. intractive elixir environment $ iex 2. hello world! intro.exs #!/bin/elixir io.puts(\u0026#34;hello\u0026#34; \u0026lt;\u0026gt; \u0026#34; elixir!!\u0026#34;) 3. build tool mix help mix new mix compile mix test mix run create mix new example ","title":"Elixir"},{"date":"2023-03-29","image":"","imageAlt":"","link":"https://hossein-lap.github.io/about/","summary":"For a very long time I've wanted to create a weblog to write and\nshare some stuffs in it. There we go :D\n","tags":[],"text":" hi i’m hossein\nyet another minimalist person with a passion about open source software.\ni was a computer guy from my early days back in my 1st and 2nd grade. but all i did was playing video games. until my dad came to me and said:\ndon’t just play video games kid, it can do much more than that. try to learn it.\nand that was it. it became the goal of my life :)\n1. programming i have a solid background with writing and patching softwares in some programming languages (c lua go bash python) by mostly using some tools that required a little programming knowledge to modify / configure or extend.\nlet me give you an example: i wanted to learn python language so i needed to take some notes, i decided to use latex for that matter and my notes were getting dirty, i was losing some of them, they’re getting out-of-hand, then i’ve decided to use git for managing them.\ni learned c by patching / configuring the suckless tools, lua by configuring neovim and writing plugins for it, bash by using it daily with \u0026#34;live inside terminal\u0026#34; approach. of cource i’ve also read books and documentations for them eventually. python and go are the ones that i really sat-down and read books / docs about them from the beginning of the journey.\n2. workflow a simple guy likes simplicity.\ni use st as my terminal emulator. i have vim (or neovim i’m fine with both) as my text editor in my pocket, tmux as multiplexer / session-manager by my side, i have a home in any window manger (but i perfer it to be inside dwm over the other). also for some bidirectional papers and documents i’ve let the little evil in, (doom) emacs.\nto be honest, i just need a posix-complaint shell, tmux, vim and git. all of these can be repleaced and i’m fine with their alternatives.\n2.1. operating system currently (as of june 21, 2024) i’m using nixos as my daily-driver os.\ni enjoy nixos’s approach and its reproducability, just starting to like nix language / packages manager. i’ve wanted to learn a functional programming language anyway (i still might go for elixir) so, that’s might be it, who knows ;)\nupdate (september 14, 2024): back to my good old void linux for a while now.\ni’m very fine and comfortable with most of other linux distributions out there. i’ve started using linux with ubuntu 18.04, shortly moved to linux mint 18 and used it about a 6 to 10 months, after that i went for manjaro xfce, installed it, used it for about 3 or so months and then, i installed manjaro i3.\nthe emphasizing manjaro i3 is because it really changed the way i look at a gui.\n3. wip ","title":"About"},{"date":"2023-03-29","image":"","imageAlt":"","link":"https://hossein-lap.github.io/resume/","summary":"For a very long time I've wanted to create a weblog to write and\nshare some stuffs in it. There we go :D\n","tags":[],"text":" welcome to my blog. i’m hossein (aka \u0026#34;pj\u0026#34; or \u0026#34;hos\u0026#34;) and i’ll be posting my own notes, ideas, programs and other stuffs. i am a programmer / devops engineer with passions about open-source software and trees. personally i enjoy minimalism and simpleness of things.\nalso, i use vim btw ;)\nbookshelf languages lua, go, c, bash, perl\ntools linux, git, docker, kubernetes, ansible, qemu/kvm, vim, tmux\nwriting latex, groff, asciidoc, markdown\nhobbies coding, writing, biking, volleyball, fishing, music, movies\n1. the journey i was a computer guy from my early days back in my 1st and 2nd grade. but all i did was playing video games. until my dad came to me and said:\ndon’t just play video games kid, it can do much more than that. try to learn it.\nand that was it. it became the goal of my life :)\n1.1. programming i have a solid background with writing and patching softwares in some programming languages (c, lua, go, bash, python) by mostly using some tools that required a little programming knowledge to modify / configure or extend.\nlet me give you an example: i wanted to learn python language so i needed to take some notes, i decided to use latex for that matter and my notes were getting dirty, i was losing some of them, they’re getting out-of-hand, then i’ve decided to use git for managing them.\ni learned c by patching / configuring the suckless tools, lua by configuring neovim and writing plugins for it, bash by using it daily with \u0026#34;live inside terminal\u0026#34; approach. of cource i’ve also read books and documentations for them eventually. python and go are the ones that i really sat-down and read books / docs about them from the beginning of the journey.\n1.2. workflow a simple guy likes simplicity.\ni use st as my terminal emulator. i have vim (or neovim i’m fine with both) as my text editor in my pocket, tmux as multiplexer / session-manager by my side, i have a home in any window manger (but i perfer it to be inside dwm over the other). also for some bidirectional papers and documents i’ve let the little evil in, (doom) emacs.\nto be honest, i just need a posix-complaint shell, tmux, vim and git. all of these can be repleaced and i’m fine with their alternatives.\n1.2.1. operating system currently (as of june 21, 2024) i’m using nixos as my daily-driver os.\ni enjoy nixos’s approach and its reproducability, just starting to like nix language / packages manager. i’ve wanted to learn a functional programming language anyway (i still might go for elixir) so, that’s might be it, who knows ;)\nupdate 1 september 14, 2024: back to my good old void linux for a while now.\nupdate 2 january 26, 2025: i moved back to debian™ based distros. currently running linux mint™ on my work machine and personal laptop.\ni’m very fine and comfortable with most of other linux® distributions out there. i’ve started using linux with ubuntu 18.04, shortly moved to linux mint 18 and used it about a 6 to 10 months, after that i went for manjaro xfce, installed it, used it for about 3 or so months and then, i installed manjaro i3.\nthe emphasizing manjaro i3 is because it really changed the way i look at a gui.\n1.3. wip ","title":"Resume"}]
}

