<!DOCTYPE html>
<html class="" lang="en"><head>
    
        <script>
            if (location.host != new URL("https:\/\/hossein-lap.github.io\/").host) location.href = "https:\/\/hossein-lap.github.io\/"
        </script>
    
    <meta name="robots" content="noai, noimageai">
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=7" />

    <link
    rel="icon"
    href='/images/ed/foo.png'
/>
<link
    rel="shortcut icon"
    href='/images/ed/foo.png'
    type="image/x-icon"
/>
<link
    rel="apple-touch-icon"
    href='/images/ed/foo.png'
/>

    <link
        rel="icon"
        href='/images/ed/foo.png'
        type="image/svg+xml"
    />

<title>
        
            Accessing K8S pods  &ndash;
        
        Hossein Esmail
    </title>

    
    <link href="/symbols-nerd-font/symbols-nerd-font.css" rel="stylesheet" integrity="sha512-lydow8GLOLlYNOtHlksNCmGWWCBsbIEtikXpHzfWqx78HLlyQZHOzyLwPpKol4Th6aCwLUXOfODVYgwrd3nwKQ=="/>
    <link href="/jetbrains-mono/jetbrains-mono.css" rel="stylesheet" integrity="sha512-tJxlgL6v1Y7kFf+qB8SloaAMKnOAw6WouknxXtIjkBux9Y/9aX81EUWOJO8c/3l98DmjG8brr4to7zaez606Fg=="/>

    
    
    <link type="text/css" rel="stylesheet" href=https://hossein-lap.github.io/css/styles.a506a9eff4ee159163928a9c18d67715835303669cc007e3d239006b50040b89e8b19810f76a3991be15f1d0ba0800ff0b715610e8d06c82051be74a0ebe7999.css integrity="sha512-pQap7/TuFZFjkoqcGNZ3FYNTA2acwAfj0jkAa1AEC4nosZgQ92o5kb4V8dC6CAD/C3FWEOjQbIIFG&#43;dKDr55mQ==" />
<meta name="author" content="Hossein Esmail" />

    
        <meta name="keywords" content='ingress, K8S, LoadBalancer, nginx, NodePort' />
    
    
        <meta name="description" content="Configure kubernetes infrastructre with NodePort, ClusterIP, Ingress, nginx load-balancer
" />
    

<meta property="og:site_name"
    content='Hossein Esmail' />

    <meta property="og:title" content="Accessing K8S pods" />
    <meta property="og:type" content="article" />
    
    <meta
        property="article:author" content="Hossein Esmail" />
    <meta
        property="article:published_time"
        content='2024-05-31T18:50:32Z&#43;0330' />
    
        
            <meta property="article:tag" content="ingress" />
        
            <meta property="article:tag" content="K8S" />
        
            <meta property="article:tag" content="LoadBalancer" />
        
            <meta property="article:tag" content="nginx" />
        
            <meta property="article:tag" content="NodePort" />
        
    
    <meta property="og:url" content="https://hossein-lap.github.io/notes/k8s-ingress-loadbalancer/" />
    
    
    <meta property="og:image"
        content="https://hossein-lap.github.io/images/ed/foo.png" />
    
        <meta property="og:description" content="Configure kubernetes infrastructre with NodePort, ClusterIP, Ingress, nginx load-balancer
" />
    

<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:domain"
      content='ossein-lap.github.io'
/>
<meta property="twitter:url" content="https://hossein-lap.github.io/notes/k8s-ingress-loadbalancer/" />


    <meta name="twitter:title" content="Accessing K8S pods" />
    
    
    
    <meta name="twitter:image"
        content="https://hossein-lap.github.io/images/ed/foo.png" />
    
        <meta name="twitter:description" content="Configure kubernetes infrastructre with NodePort, ClusterIP, Ingress, nginx load-balancer
" />
    

<link rel="manifest" href="/manifest/index.json" />
</head>


<body>
        <div id="baseContainer"><header class="">
<div class="titleAndSearchContainer">
        <div id="titleContainer">
            
            <div class="rightOfLogo">
                <div class="titleAndHamburger">
                    <h1>
                        <a class="unstyledLink" href="/">Hossein Esmail</a>
                        
                            <img src='/images/ed/foo.png' alt='Logo'/>
                        
                    </h1>
                    
                </div>
                <div id="wide_nav"><nav>
    
    <ul id="main-nav">
        <li><a href="/">Home</a></li>
        
        
            <li><a href="/docs/">Docs</a></li>
        
            <li><a href="/notes/">Notes</a></li>
        
            <li><a href="/about/">About</a></li>
        
        
        
        
        
        
            <li><a href="/tags/">Tags</a></li>
        
        
    </ul>
</nav>
</div>
            </div>
        </div>
        <div class="search">
    <input id="searchbar" type="text" placeholder='Search' />
    <span class="nerdlink" onclick="newSearch();">&#xf002;</span>
</div>
<script>
    function newSearch() {
        let term = searchbar.value.trim();
        if (!term) return;
        location.href = `/search/?q=${term}`;
    }
    searchbar.onkeyup = (ev) => {if (ev.keyCode == 13) newSearch()};
</script>

    </div>
    <div id="links">
        <a
    
        rel="noreferrer"
    
    target="_blank"
    class="nerdlink"
    href="/index.xml">
    
    
        &#xf09e;
    
    <span>
        RSS
    </span>
</a>

        
        <a
    
        rel="noreferrer"
    
    target="_blank"
    class="nerdlink"
    href="https://github.com/hossein-lap">
    
    
        &#xf09b;
    
    <span>
        GitHub
    </span>
</a>
<a
    
        rel="noreferrer"
    
    target="_blank"
    class="nerdlink"
    href="https://gitlab.com/primejade">
    
    
        &#xf296;
    
    <span>
        GitLab
    </span>
</a>
<a
    
        rel="noreferrer"
    
    target="_blank"
    class="nerdlink"
    href="mailto://hosteam01@gmail.com">
    
    
        &#xf6ed;
    
    <span>
        Gmail
    </span>
</a>
<a
    
        rel="noreferrer"
    
    target="_blank"
    class="nerdlink"
    href="https://linkedin.com/in/hossein-smail">
    
    
        &#xf0e1;
    
    <span>
        LinkedIn
    </span>
</a>

    </div>
    

</header>
<div id="contentContainer">
                <div id="content">
                    <main>
<article class="card single">
    
        <h1>Accessing K8S pods</h1>
    
    
        <p class="date">
            <span title='Date'> </span>
    2024-05-31

</p>
    
    
    
    
    <div><div id="preamble">
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
This is some note, nothing serious.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exposing_services_to_external_clients">1. Exposing services to external clients</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Few ways to make a service accessible externally:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Port-forwarding</p>
</li>
<li>
<p><code>NodePort</code> Service Type</p>
</li>
<li>
<p>Service Object (<code>LoadBalancer</code> Service Type)</p>
</li>
<li>
<p>Create <code>Ingress</code> Resource (Radically Different Mechanism)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_forwarding_a_local_network_port_to_a_port_in_the_pod">2. Forwarding a Local Network Port to a Port in The Pod</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you want to talk to a specific pod without going through a service (for
debugging or other reasons), Kubernetes allows you to configure port forwarding
to the pod.</p>
</div>
<div class="paragraph">
<p>This is done through the <code>kubectl port-forward</code> command. The following command
will forward your machine’s local port <code>8888</code> to port <code>8080</code> of your
<code>kubia-manual</code> pod:</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #d0d0d0;background-color: #151515"><code data-lang="console"><span style="color: #d0d0d0;background-color: #151515">$</span><span style="color: #d0d0d0;background-color: #151515"> </span>kubectl port-forward kubia-manual 8888:8080</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>... Forwarding from 127.0.0.1:8888 -&gt; 8080
... Forwarding from [::1]:8888 -&gt; 8080</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_connecting_to_the_pod_through_the_port_forwarder">2.1. Connecting to The Pod Through the Port Forwarder</h3>
<div class="paragraph">
<p>In a different terminal, you can now use curl to send an HTTP request to your pod
through the <code>kubectl port-forward</code> proxy running on <code>localhost:8888</code>:</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #d0d0d0;background-color: #151515"><code data-lang="console"><span style="color: #d0d0d0;background-color: #151515">$</span><span style="color: #d0d0d0;background-color: #151515"> </span>curl localhost:8888</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>You&#39;ve hit kubia-manual</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_service_object">3. Service Object</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each pod gets its own IP address, but this address is internal to the cluster
and isn’t accessible from outside of it. To make the pod accessible from the
outside, you’ll expose it through a Service object. You’ll create a special
service of type <code>LoadBalancer</code>, because if you create a regular service (a
<code>ClusterIP</code> service), like the pod, it would also only be accessible from
inside the cluster. By creating a <code>LoadBalancer</code> type service, an external load
balancer will be created and you can connect to the pod through the load
balancer’s public IP.</p>
</div>
<div class="sect2">
<h3 id="_creating_a_service_object">3.1. Creating a Service Object</h3>
<div class="paragraph">
<p>To create the service, you’ll tell Kubernetes to expose the ReplicationController you
created:</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #d0d0d0;background-color: #151515"><code data-lang="console"><span style="color: #d0d0d0;background-color: #151515">$</span><span style="color: #d0d0d0;background-color: #151515"> </span>kubectl expose rc &lt;rep-controller-name&gt; <span style="color: #f4bf75">--type</span><span style="color: #d0d0d0">=</span>LoadBalancer <span style="color: #f4bf75">--name</span> &lt;lb-name&gt;
<span style="color: #d0d0d0;background-color: #151515">$</span><span style="color: #d0d0d0;background-color: #151515"> </span>kubectl expose rc kubia <span style="color: #f4bf75">--type</span><span style="color: #d0d0d0">=</span>LoadBalancer <span style="color: #f4bf75">--name</span> kubia-http</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>service &#34;kubia-http&#34; exposed</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</article>

    
    <p class="articleTagsContainer">
        <span> </span>
        <strong>Tags:</strong>
        
            <a
                
                class="buttonTag"
                
                href="/tags/ingress/">#ingress</a>
        
            <a
                
                class="buttonTag"
                
                href="/tags/k8s/">#K8S</a>
        
            <a
                
                class="buttonTag"
                
                href="/tags/loadbalancer/">#LoadBalancer</a>
        
            <a
                
                class="buttonTag"
                
                href="/tags/nginx/">#nginx</a>
        
            <a
                
                class="buttonTag"
                
                href="/tags/nodeport/">#NodePort</a>
        
    </p>





    
    


                    </main><footer>
    <hr />

<p><small>
        2024 &copy; Hos Es
    </small></p>
    <p><small>
        <a href='https://gitlab.com/gabmus/hugo-ficurinia'>Ficurinia theme</a> for <a href='https://gohugo.io'>Hugo</a> by <a href='https://gabmus.org'>Gabriele Musco</a>. Licensed under <a href='https://www.gnu.org/licenses/agpl-3.0.html'>GNU AGPLv3</a>.
    </small></p>
</footer>
</div>
            </div>
        </div>


</body>
</html>
